# 多比例图片生成指南 📐

## 🎯 功能概述

AI绘画平台现在支持多种图片比例，用户可以根据需求选择最适合的图片尺寸：

### 📏 支持的比例格式

| 比例 | 名称 | 像素尺寸 | 适用场景 |
|-----|------|---------|----------|
| **1:1** | Square | 1024×1024 | 社交媒体头像、Instagram方图 |
| **2:3** | Portrait | 1024×1536 | 人物肖像、竖版海报 |
| **3:2** | Landscape | 1536×1024 | 风景照片、横版展示 |
| **16:9** | Widescreen | 1792×1024 | 电脑壁纸、横幅广告 |
| **9:16** | Vertical | 1024×1792 | 手机壁纸、竖屏视频封面 |
| **4:3** | Classic | 1152×864 | 经典显示器、传统照片 |

## 🔧 技术实现

### 前端比例选择
- 用户在Professional模式的侧边栏中选择Aspect Ratio
- 选择的比例会传递给生成函数

### API适配
- 系统自动将比例转换为对应的像素尺寸
- 对于不同的API提供商，进行格式适配：
  - **OpenAI/Stability AI**: 使用像素格式 (如 "1024x1024")
  - **KIE.AI**: 使用比例格式 (如 "1:1")
  - **Replicate**: 使用width/height分离格式

### 尺寸映射逻辑
```javascript
const aspectRatioToSize = {
  "1:1": "1024x1024",    // 正方形
  "2:3": "1024x1536",    // 竖向长方形  
  "3:2": "1536x1024",    // 横向长方形
  "16:9": "1792x1024",   // 宽屏
  "9:16": "1024x1792",   // 竖屏
  "4:3": "1152x864"      // 经典比例
}
```

## 🎨 使用方法

### 步骤1：进入Professional模式
1. 点击右上角的"Pro"按钮
2. 确保侧边栏处于展开状态

### 步骤2：选择比例
1. 在侧边栏找到"Aspect Ratio 📐"部分
2. 点击你需要的比例按钮
3. 选中的比例会高亮显示

### 步骤3：生成图片
1. 输入你的提示词
2. 点击"Generate"按钮
3. 系统会按照选择的比例生成图片

## ⚙️ API配置

### 配置不同的尺寸支持

对于管理员，可以在API配置中设置支持的尺寸：

#### OpenAI DALL-E配置示例
```json
{
  "quality": "standard", 
  "size": "1024x1024",
  "style": "vivid"
}
```

#### KIE.AI配置示例  
```json
{
  "quality": "standard",
  "size": "1:1", 
  "style": "vivid"
}
```

#### Replicate配置示例
```json
{
  "width": 1024,
  "height": 1024, 
  "num_outputs": 1
}
```

## 🚀 开发者注意事项

### 新增比例支持
1. 在`ASPECT_RATIOS`数组中添加新比例
2. 更新`aspectRatioToSize`映射
3. 在API Manager中更新`sizeMap`转换
4. 测试各个API提供商的兼容性

### 测试清单
- [ ] 1:1比例生成测试
- [ ] 2:3竖向比例测试  
- [ ] 3:2横向比例测试
- [ ] 16:9宽屏比例测试
- [ ] API故障转移测试
- [ ] 不同提供商格式适配测试

## 📝 更新日志

**2025-06-08**
- ✅ 增加2:3和3:2比例支持
- ✅ 完善KIE.AI尺寸格式转换
- ✅ 更新管理员配置界面说明
- ✅ 添加前端比例选择器
- ✅ 实现动态尺寸传递机制

---

> 🎨 **提示**: 选择合适的比例可以让你的AI绘画作品更好地适应不同的使用场景！ 