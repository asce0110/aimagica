(()=>{var e={};e.id=928,e.ids=[928],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},51231:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>g,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c}),a(75603),a(54299),a(43238),a(27845),a(42681);var r=a(72556),s=a(78383),l=a(48224),o=a.n(l),i=a(4519),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);a.d(t,n);let c=["",{children:["gallery",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,75603)),"/mnt/d/cursor/aitoimage/ai-sketch-platform/app/gallery/page.tsx"]}]},{loading:[()=>Promise.resolve().then(a.bind(a,2597)),"/mnt/d/cursor/aitoimage/ai-sketch-platform/app/gallery/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,54299)),"/mnt/d/cursor/aitoimage/ai-sketch-platform/app/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,43238)),"/mnt/d/cursor/aitoimage/ai-sketch-platform/app/error.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,27845)),"/mnt/d/cursor/aitoimage/ai-sketch-platform/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,42681)),"/mnt/d/cursor/aitoimage/ai-sketch-platform/app/not-found.tsx"]}],d=["/mnt/d/cursor/aitoimage/ai-sketch-platform/app/gallery/page.tsx"],m="/gallery/page",g={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/gallery/page",pathname:"/gallery",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7511:(e,t,a)=>{Promise.resolve().then(a.bind(a,32483))},32483:(e,t,a)=>{"use strict";a.d(t,{default:()=>T});var r=a(39543),s=a(13872),l=a(54055),o=a(54547),i=a(52188),n=a(55109),c=a(59637),d=a(34579),m=a(28338),g=a(95350),u=a(32080),h=a(55790),p=a(62804),x=a(34267),f=a(77093),y=a(53834),b=a(737),w=a(45001),v=a(35934),k=a(31299),j=a(41431),N=a(14257);let I=(0,a(72930).Z)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);var A=a(24362),S=a(27594),C=a(68346),$=a(41563);function _({items:e,columns:t=4,gap:a=16,itemMinWidth:i=250,renderItem:n,onLoadMore:c,hasMore:d=!1,loading:m=!1,className:g="",initialRenderCount:u=12,overscan:h=5}){let p=(0,s.useRef)(null),[x,f]=(0,s.useState)(0),[y,b]=(0,s.useState)(0),[w,v]=(0,s.useState)(0),[k,j]=(0,s.useState)(new Map),[N,I]=(0,s.useState)({start:0,end:u}),[A,S]=(0,s.useState)(!0),C=(0,s.useMemo)(()=>!x||t<=2?t:Math.max(1,Math.min(t,Math.floor(x/(i+a)))),[x,t,i,a]),_=(0,s.useMemo)(()=>{let t=(x-a*(C-1))/C,r=Array(C).fill(0),s=[];return e.forEach((e,l)=>{let o=r.indexOf(Math.min(...r)),i=k.get(e.id)||e.height||300;s.push({left:o*(t+a),top:r[o],width:t,height:i,column:o}),r[o]+=i+a}),{positions:s,totalHeight:Math.max(...r),columnWidth:t}},[e,C,x,a,k]),L=(0,s.useCallback)((e,t)=>{j(a=>{let r=new Map(a);return a.get(e)!==t&&t>0?(r.set(e,t),r):a})},[]),D=(0,s.useMemo)(()=>{let{start:t,end:a}=A?{start:0,end:Math.min(u,e.length)}:N;return e.slice(t,a).map((e,a)=>{let s=t+a,o=_.positions[s];return o?r.jsx(l.E.div,{className:"absolute",style:{left:o.left,top:o.top,width:o.width},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:a%C*.1},children:r.jsx(M,{item:e,index:s,onHeightChange:L,renderItem:n})},e.id):null})},[e,N,_.positions,n,L,C,A,u]);return(0,r.jsxs)("div",{ref:p,className:`relative w-full ${g}`,children:[r.jsx("div",{style:{height:_.totalHeight}}),r.jsx("div",{className:"absolute inset-0",children:D}),d&&r.jsx("div",{className:"flex justify-center mt-8 relative z-10",children:r.jsx(o.z,{onClick:c,disabled:m,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all duration-200",children:m?(0,r.jsxs)(r.Fragment,{children:[r.jsx(l.E.div,{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),"Loading Magic..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx($.Z,{className:"w-5 h-5 mr-2"}),"Load More Magic ✨"]})})})]})}function M({item:e,index:t,onHeightChange:a,renderItem:l}){let o=(0,s.useRef)(null);return r.jsx("div",{ref:o,className:"w-full",children:l(e,t)})}var L=a(17937),D=a(30237),P=a(38801);function z({id:e,url:t,title:a,author:o,likes:i,views:n,isPremium:d=!1,isFeatured:m=!1,isLiked:g=!1,createdAt:h,size:f="medium",rotation:b=0,onClick:w,priority:v=!1,waterfallHeight:k}){let[j,N]=(0,s.useState)(!1),[I,A]=(0,s.useState)(v),[S,$]=(0,s.useState)(!1),[_,M]=(0,s.useState)(),z=(0,s.useRef)(null),Z=(0,s.useRef)(null),F=(0,C.ZP)(t),R=()=>k||({vertical:400,horizontal:225,small:300,medium:375,large:450})[f]||375;return(0,r.jsxs)(l.E.div,{ref:z,className:"break-inside-avoid mb-4 relative cursor-pointer",onClick:w,style:{transform:`rotate(${b}deg)`},whileHover:{scale:1.03,zIndex:10,rotate:0,transition:{duration:.2}},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[r.jsx(L.Zb,{className:"group overflow-hidden bg-white/60 backdrop-blur-sm border-white/30 shadow-lg hover:shadow-xl transition-all duration-300",children:r.jsx(L.aY,{className:"p-0",children:r.jsx("div",{className:"w-full relative bg-white rounded-md p-1",children:(0,r.jsxs)("div",{className:"w-full bg-white rounded-sm overflow-hidden relative",style:{...k?{height:R()}:{aspectRatio:"vertical"===f?"3/4":"horizontal"===f?"4/3":"small"===f?"1/1":"medium"===f?"4/5":"large"===f?"3/4":"4/5",minHeight:R()}},children:[!j&&r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#f5f1e8] to-[#ebe5d6] flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"relative w-12 h-12 mx-auto mb-2",children:[r.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-[#d4a574]/40 animate-spin"}),r.jsx("div",{className:"absolute inset-1 rounded-full border-2 border-[#8b7355]/60 animate-[spin_1.5s_linear_infinite_reverse]"}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx(u.Z,{className:"w-5 h-5 text-[#8b7355] animate-pulse"})}),r.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-[#d4a574] rounded-full animate-ping"}),r.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 bg-[#8b7355] rounded-full animate-ping delay-300"}),r.jsx("div",{className:"absolute top-1 -left-1 w-1.5 h-1.5 bg-[#d4a574]/80 rounded-full animate-ping delay-500"}),r.jsx("div",{className:"absolute -bottom-1 right-1 w-1.5 h-1.5 bg-[#8b7355]/80 rounded-full animate-ping delay-700"})]}),r.jsx("div",{className:"text-sm text-[#8b7355] font-bold",style:{fontFamily:"var(--font-accent)"},children:I?"✨ Casting...":"\uD83D\uDD2E Waiting..."})]})}),S&&r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#f5f1e8] to-[#e1d4c0] flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 mx-auto mb-2 bg-gradient-to-br from-[#d4a574]/30 to-[#8b7355]/30 rounded-lg border-2 border-dashed border-[#8b7355]/40 flex items-center justify-center transform rotate-12",children:r.jsx(D.Z,{className:"w-6 h-6 text-[#8b7355]/60"})}),r.jsx("div",{className:"text-sm text-[#8b7355]/80 font-bold mb-1",style:{fontFamily:"var(--font-accent)"},children:"\uD83D\uDD2E Magic Failed"}),r.jsx("button",{className:"text-xs text-[#8b7355] font-medium hover:text-[#6b5d3f] transition-colors px-2 py-1 rounded bg-[#d4a574]/20 hover:bg-[#d4a574]/30",onClick:e=>{e.stopPropagation(),$(!1),N(!1),A(!0)},children:"Try Again ✨"})]})}),I&&!S&&r.jsx("img",{ref:Z,src:F,alt:a,className:`w-full h-full object-cover transition-opacity duration-300 ${j?"opacity-100":"opacity-0"}`,loading:v?"eager":"lazy",onLoad:t=>{let r=t.currentTarget;M(r.naturalHeight*(r.offsetWidth/r.naturalWidth)),N(!0),$(!1),console.log(`✅ Gallery图片加载成功:`,{id:e,title:a,url:F,dimensions:`${r.naturalWidth}x${r.naturalHeight}`})},onError:t=>{console.error(`❌ Gallery图片加载失败:`,{id:e,title:a,url:F,error:t}),$(!0),N(!0)},fetchPriority:v?"high":"auto",decoding:"async"}),(0,r.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-2 md:p-3 z-10",children:[r.jsx("h3",{className:"text-white font-bold text-xs md:text-sm mb-1 line-clamp-2",children:a}),(0,r.jsxs)("p",{className:"text-gray-300 text-xs line-clamp-1",children:["by ",o]})]}),(0,r.jsxs)("div",{className:"absolute top-2 left-2 flex gap-1 z-20",children:[m&&r.jsx(c.C,{variant:"secondary",className:"text-xs bg-yellow-500/80 text-white",children:r.jsx(P.Z,{className:"h-3 w-3"})}),d&&r.jsx(c.C,{variant:"secondary",className:"text-xs bg-purple-500/80 text-white",children:r.jsx(p.Z,{className:"h-3 w-3"})})]}),(0,r.jsxs)("div",{className:"absolute bottom-1 md:bottom-2 right-1 md:right-2 flex items-center gap-1 md:gap-2 text-white text-xs z-20",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 bg-black/50 rounded px-1.5 md:px-2 py-0.5 md:py-1 backdrop-blur-sm",children:[r.jsx(x.Z,{className:"h-2.5 w-2.5 md:h-3 md:w-3"}),r.jsx("span",{className:"text-xs md:text-xs",children:i>1e3?`${(i/1e3).toFixed(1)}k`:i})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 bg-black/50 rounded px-1.5 md:px-2 py-0.5 md:py-1 backdrop-blur-sm",children:[r.jsx(y.Z,{className:"h-2.5 w-2.5 md:h-3 md:w-3"}),r.jsx("span",{className:"text-xs md:text-xs",children:n>1e3?`${(n/1e3).toFixed(1)}k`:n})]})]}),g&&r.jsx("div",{className:"absolute bottom-2 left-2 z-20",children:r.jsx(x.Z,{className:"w-4 h-4 text-red-500 fill-red-500"})})]})})})}),r.jsx("div",{className:"mt-2 flex justify-center",children:r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:h})})]})}let Z="https://aimagica-api.403153162.workers.dev",F=null,R=0;async function E(){let e=Date.now();if(null!==F&&e-R<3e4)return F;try{let t=new AbortController,a=setTimeout(()=>t.abort(),1e3),r=await fetch(`${Z}/api/test`,{method:"GET",signal:t.signal,cache:"no-store"});return clearTimeout(a),F=r.ok,R=e,console.log(`🌐 网络检查结果: ${F?"可用":"不可用"}`),F}catch(t){return F=!1,R=e,console.log(`🌐 网络检查失败，判定为不可用:`,t),!1}}async function G(e,t={}){try{console.log(`🔄 API请求: ${e}`);let a=new AbortController,r=setTimeout(()=>a.abort(),2e3),s=await fetch(e,{...t,signal:a.signal,headers:{"Content-Type":"application/json",...t.headers}});if(clearTimeout(r),!s.ok)throw Error(`HTTP_${s.status}`);return console.log(`✅ API请求成功: ${e}`),s}catch(t){throw console.warn(`⚠️ API请求失败: ${t.message}`),console.error(`❌ API不可用，启用离线模式: ${e}`),Error("API_UNAVAILABLE")}}let O={toggleImageLike:async function(e){try{console.log(`❤️ 尝试切换点赞状态: ${e}`);let t=await G(`${Z}/api/gallery/like/${e}`,{method:"POST"}),a=await t.json();return console.log(`✅ 点赞操作成功:`,a),localStorage.setItem(`gallery_likes_${e}`,a.newCount?.toString()||"0"),localStorage.setItem(`gallery_liked_${e}`,a.liked?.toString()||"false"),{success:!0,liked:a.liked,newCount:a.newCount||0}}catch(l){console.warn(`⚠️ API不可用，使用离线模式点赞: ${e}`,l);let t="true"===localStorage.getItem(`gallery_liked_${e}`),a=parseInt(localStorage.getItem(`gallery_likes_${e}`)||"0"),r=!t,s=r?a+1:Math.max(0,a-1);return localStorage.setItem(`gallery_liked_${e}`,r.toString()),localStorage.setItem(`gallery_likes_${e}`,s.toString()),console.log(`📱 离线点赞成功: ${r}, 新数量: ${s}`),{success:!0,liked:r,newCount:s}}},incrementImageView:async function(e){try{console.log(`👁️ 增加浏览量: ${e}`);let t=(await G(`${Z}/api/gallery/view/${e}`,{method:"POST"})).ok;return console.log(`${t?"✅":"⚠️"} 浏览量${t?"增加成功":"增加失败"}: ${e}`),t}catch(t){return console.warn(`⚠️ 浏览量增加失败: ${e}`,t),!1}},getImageComments:async function(e){try{console.log(`💬 尝试获取图片评论: ${e}`);let t=await G(`${Z}/api/gallery/comments/${e}`),a=await t.json();if(console.log(`✅ 评论获取成功:`,a),a.success&&Array.isArray(a.comments)){let t=a.comments.map(t=>{let a="true"===localStorage.getItem(`comment_liked_${t.id}`),r=parseInt(localStorage.getItem(`comment_likes_${t.id}`)||"0");return{id:t.id,imageId:t.imageId||e,content:t.content,author:t.author||"AIMAGICA User",authorAvatar:t.authorAvatar||"/images/aimagica-logo.png",createdAt:t.createdAt||new Date().toISOString(),likes:Math.max(t.likes||0,r),isLiked:t.isLiked||a}});return localStorage.setItem(`gallery_comments_data_${e}`,JSON.stringify(t)),localStorage.setItem(`gallery_comments_${e}`,t.length.toString()),t}return[]}catch(t){console.warn(`⚠️ API不可用，使用离线模式评论: ${e}`,t);try{let t=localStorage.getItem(`gallery_comments_data_${e}`);if(t){let e=JSON.parse(t).map(e=>{let t="true"===localStorage.getItem(`comment_liked_${e.id}`),a=parseInt(localStorage.getItem(`comment_likes_${e.id}`)||e.likes?.toString()||"0");return{...e,likes:a,isLiked:t}});return console.log(`📱 使用缓存评论: ${e.length}条`),e}}catch(e){console.warn("缓存评论解析失败:",e)}return[]}},addImageComment:async function(e,t){try{if(console.log(`💬 开始添加评论: ${e}, 内容长度: ${t.length}`),!t||0===t.trim().length)return console.warn("⚠️ 评论内容为空"),null;if(t.length>500)throw console.warn("⚠️ 评论内容过长"),Error("评论内容不能超过500字符");let a=await G(`${Z}/api/gallery/comments/${e}`,{method:"POST",body:JSON.stringify({content:t.trim(),author:"AIMAGICA User"})});if(!a.ok){let e=await a.text();throw console.error(`❌ API响应错误: ${a.status} ${a.statusText}`,e),Error(`服务器错误: ${a.status}`)}let r=await a.json();if(console.log(`✅ 评论添加成功:`,r),r.success&&r.comment){let t={id:r.comment.id,imageId:e,content:r.comment.content,author:r.comment.author||"AIMAGICA User",authorAvatar:r.comment.authorAvatar||"/images/aimagica-logo.png",createdAt:r.comment.createdAt||new Date().toISOString(),likes:r.comment.likes||0,isLiked:!1},a=parseInt(localStorage.getItem(`gallery_comments_${e}`)||"0");localStorage.setItem(`gallery_comments_${e}`,(a+1).toString());try{let a=localStorage.getItem(`gallery_comments_data_${e}`),r=a?JSON.parse(a):[];r.unshift(t),localStorage.setItem(`gallery_comments_data_${e}`,JSON.stringify(r))}catch(e){console.warn("缓存评论数据失败:",e)}return t}return null}catch(r){console.warn(`⚠️ API不可用，使用离线模式添加评论: ${e}`,r);let a={id:`offline_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,imageId:e,content:t.trim(),author:"AIMAGICA User",authorAvatar:"/images/aimagica-logo.png",createdAt:new Date().toISOString(),likes:0,isLiked:!1};try{let t=parseInt(localStorage.getItem(`gallery_comments_${e}`)||"0");localStorage.setItem(`gallery_comments_${e}`,(t+1).toString());let r=localStorage.getItem(`gallery_comments_data_${e}`),s=r?JSON.parse(r):[];return s.unshift(a),localStorage.setItem(`gallery_comments_data_${e}`,JSON.stringify(s)),console.log(`📱 离线评论添加成功: ${a.id}`),a}catch(e){return console.error("离线评论存储失败:",e),null}}},toggleCommentLike:async function(e){try{console.log(`👍 切换评论点赞: ${e}`);let t=await G(`${Z}/api/gallery/comment-like/${e}`,{method:"POST"});if(t.ok){let a=await t.json();return console.log(`✅ 评论点赞成功: ${e}`),localStorage.setItem(`comment_liked_${e}`,a.liked?.toString()||"false"),localStorage.setItem(`comment_likes_${e}`,a.newCount?.toString()||"0"),{success:!0,liked:a.liked||!1,newCount:a.newCount||0}}throw Error(`HTTP ${t.status}`)}catch(l){console.warn(`⚠️ API不可用，使用离线模式评论点赞: ${e}`,l);let t="true"===localStorage.getItem(`comment_liked_${e}`),a=parseInt(localStorage.getItem(`comment_likes_${e}`)||"0"),r=!t,s=r?a+1:Math.max(0,a-1);return localStorage.setItem(`comment_liked_${e}`,r.toString()),localStorage.setItem(`comment_likes_${e}`,s.toString()),console.log(`📱 离线评论点赞成功: ${r}, 新数量: ${s}`),{success:!0,liked:r,newCount:s}}},getBatchImageStats:async function(e){if(!await E()){console.log(`📱 网络不可用，直接使用离线模式统计: ${e.length}张图片`);let t={};return e.forEach(e=>{let a=parseInt(localStorage.getItem(`gallery_likes_${e}`)||"0"),r=parseInt(localStorage.getItem(`gallery_views_${e}`)||"0"),s=parseInt(localStorage.getItem(`gallery_comments_${e}`)||"0"),l="true"===localStorage.getItem(`gallery_liked_${e}`);t[e]={id:e,likes:a,comments:s,views:r,isLiked:l}}),t}try{console.log(`📊 网络可用，尝试批量获取图片统计: ${e.length}张图片`);let t=await G(`${Z}/api/gallery/batch-stats`,{method:"POST",body:JSON.stringify({imageIds:e})}),a=await t.json();return console.log(`✅ 批量统计获取成功:`,Object.keys(a.stats||{}).length),a.stats||{}}catch(a){console.warn(`⚠️ API请求失败，使用离线模式统计: ${e.length}张图片`,a);let t={};return e.forEach(e=>{let a=parseInt(localStorage.getItem(`gallery_likes_${e}`)||"0"),r=parseInt(localStorage.getItem(`gallery_views_${e}`)||"0"),s=parseInt(localStorage.getItem(`gallery_comments_${e}`)||"0"),l="true"===localStorage.getItem(`gallery_liked_${e}`);t[e]={id:e,likes:a,comments:s,views:r,isLiked:l}}),console.log("\uD83D\uDCF1 使用本地缓存数据作为回退"),t}}};function T(){let{data:e}=(0,A.V)(),t=(0,C.ZP)("/images/aimagica-logo.png"),[a,$]=(0,s.useState)(()=>{try{console.log("\uD83D\uDE80 Gallery初始化: 立即同步加载静态数据");let e=function(){let e=[{id:"04033a15-7dfc-4b96-8999-91e6915ac926",url:"/images/gallery/04033a15-7dfc-4b96-8999-91e6915ac926-34c9105b.png",title:"赛博朋克女战士",author:"CyberArtist",authorAvatar:"/images/aimagica-logo.png",likes:1567,comments:103,views:6789,downloads:543,isPremium:!0,isFeatured:!0,isLiked:!1,createdAt:"5 days ago",prompt:"Cyberpunk female warrior with neon armor in futuristic city",style:"Cyberpunk",tags:["cyberpunk","warrior","female","neon","futuristic"],size:"vertical",rotation:-1.2},{id:"22ab8354-87e8-4a74-a37b-c3f08f1ced20",url:"/images/gallery/22ab8354-87e8-4a74-a37b-c3f08f1ced20-286738dd.png",title:"魔法森林精灵",author:"ForestMage",authorAvatar:"/images/aimagica-logo.png",likes:2134,comments:156,views:8901,downloads:721,isPremium:!0,isFeatured:!0,isLiked:!0,createdAt:"3 days ago",prompt:"Mystical forest elf with glowing magic and ancient trees",style:"Fantasy",tags:["fantasy","elf","forest","magic","mystical"],size:"medium",rotation:.8},{id:"294ff75d-8579-4d3d-87ee-811b69b15a99",url:"/images/gallery/294ff75d-8579-4d3d-87ee-811b69b15a99-5479e3c7.png",title:"太空探索者",author:"StarGazer",authorAvatar:"/images/aimagica-logo.png",likes:987,comments:67,views:5432,downloads:398,isPremium:!1,isFeatured:!1,isLiked:!1,createdAt:"1 week ago",prompt:"Astronaut explorer discovering alien worlds with cosmic background",style:"Sci-Fi",tags:["sci-fi","astronaut","space","alien","exploration"],size:"horizontal",rotation:-.5},{id:"2afbdc00-d083-46bf-8167-28d81971226f",url:"/images/gallery/2afbdc00-d083-46bf-8167-28d81971226f-fb48974a.png",title:"机械天使",author:"TechArtist",authorAvatar:"/images/aimagica-logo.png",likes:1432,comments:89,views:7234,downloads:556,isPremium:!0,isFeatured:!1,isLiked:!1,createdAt:"4 days ago",prompt:"Mechanical angel with cybernetic wings and ethereal lighting",style:"Cyberpunk",tags:["cyberpunk","angel","mechanical","wings","ethereal"],size:"vertical",rotation:1.5},{id:"341851d0-7c3b-4119-b503-102c0aee0d8f",url:"/images/gallery/341851d0-7c3b-4119-b503-102c0aee0d8f-b4209676.png",title:"古老神庙",author:"TempleKeeper",authorAvatar:"/images/aimagica-logo.png",likes:876,comments:43,views:4567,downloads:234,isPremium:!1,isFeatured:!0,isLiked:!0,createdAt:"6 days ago",prompt:"Ancient temple with mystical architecture and golden light",style:"Fantasy",tags:["fantasy","temple","ancient","mystical","golden"],size:"large",rotation:-.8},{id:"386628e0-61b1-4966-8575-2c2f2f162e3a",url:"/images/gallery/386628e0-61b1-4966-8575-2c2f2f162e3a-f897c7ae.png",title:"龙族传说",author:"DragonMaster",authorAvatar:"/images/aimagica-logo.png",likes:2567,comments:198,views:12345,downloads:967,isPremium:!0,isFeatured:!0,isLiked:!1,createdAt:"2 days ago",prompt:"Majestic dragon in epic fantasy landscape with magical elements",style:"Fantasy",tags:["fantasy","dragon","epic","majestic","magical"],size:"horizontal",rotation:.3},{id:"48a8804f-9028-4132-85dd-d5c4d807c75e",url:"/images/gallery/48a8804f-9028-4132-85dd-d5c4d807c75e-13630e73.jpeg",title:"未来都市",author:"UrbanVision",authorAvatar:"/images/aimagica-logo.png",likes:1234,comments:76,views:6789,downloads:445,isPremium:!1,isFeatured:!1,isLiked:!0,createdAt:"1 week ago",prompt:"Futuristic cityscape with flying vehicles and holographic displays",style:"Sci-Fi",tags:["sci-fi","city","futuristic","holographic","vehicles"],size:"medium",rotation:1.2},{id:"5abb0316-b1d9-4c3a-ac97-76fcbe63f52b",url:"/images/gallery/5abb0316-b1d9-4c3a-ac97-76fcbe63f52b-fbb64e00.png",title:"水晶洞穴",author:"CrystalMiner",authorAvatar:"/images/aimagica-logo.png",likes:789,comments:52,views:3456,downloads:287,isPremium:!1,isFeatured:!0,isLiked:!1,createdAt:"5 days ago",prompt:"Crystal cave with glowing gems and magical atmosphere",style:"Fantasy",tags:["fantasy","crystal","cave","gems","magical"],size:"vertical",rotation:-1.7},{id:"82db65f1-d54e-4f7f-a9c3-c3f5e902643b",url:"/images/gallery/82db65f1-d54e-4f7f-a9c3-c3f5e902643b-d36a1d13.png",title:"星际战舰",author:"SpaceCommander",authorAvatar:"/images/aimagica-logo.png",likes:1876,comments:123,views:8765,downloads:634,isPremium:!0,isFeatured:!1,isLiked:!0,createdAt:"3 days ago",prompt:"Massive space battleship in epic interstellar battle scene",style:"Sci-Fi",tags:["sci-fi","battleship","space","interstellar","epic"],size:"horizontal",rotation:.6},{id:"9912c424-e6a2-4ac1-98de-77bac4200978",url:"/images/gallery/9912c424-e6a2-4ac1-98de-77bac4200978-fbd736fa.jpeg",title:"魔法师塔",author:"WizardSage",authorAvatar:"/images/aimagica-logo.png",likes:1345,comments:87,views:5678,downloads:423,isPremium:!1,isFeatured:!0,isLiked:!1,createdAt:"1 week ago",prompt:"Magical wizard tower with floating spells and mystical energy",style:"Fantasy",tags:["fantasy","wizard","tower","magic","mystical"],size:"vertical",rotation:1.1},{id:"b3a47ac4-6386-41b1-8702-de4cf5ff03c1",url:"/images/gallery/b3a47ac4-6386-41b1-8702-de4cf5ff03c1-38528305.png",title:"机械神话",author:"MechLegend",authorAvatar:"/images/aimagica-logo.png",likes:2098,comments:145,views:9876,downloads:756,isPremium:!0,isFeatured:!0,isLiked:!0,createdAt:"2 days ago",prompt:"Legendary mechanical creature with mythical powers and energy",style:"Cyberpunk",tags:["cyberpunk","mechanical","legendary","mythical","energy"],size:"large",rotation:-.4}];return console.log(`📋 静态Gallery数据生成: ${e.length}张真实AI图片`),e}();if(console.log("\uD83D\uDCCA 静态数据加载结果:",{数据长度:e?.length||0,数据类型:typeof e,前3项:e?.slice(0,3)?.map(e=>({id:e.id,title:e.title}))}),e&&Array.isArray(e)&&e.length>0){let t=e.map(e=>({...e,dbLoaded:!0,localLikes:0,localViews:0,localComments:0,localIsLiked:!1}));return console.log("✅ Gallery初始化成功:",t.length,"张图片"),t}console.error("❌ Gallery初始化失败: 静态数据为空或无效")}catch(e){console.error("❌ Gallery初始化异常:",e)}return console.warn("⚠️ 使用紧急备用数据"),[{id:"emergency-cat",url:"/images/examples/cat-wizard.svg",title:"紧急备用 - 魔法师小猫",author:"AIMAGICA",authorAvatar:"/images/aimagica-logo.png",likes:0,comments:0,views:0,downloads:0,isPremium:!1,isFeatured:!1,isLiked:!1,createdAt:"now",prompt:"Emergency fallback image",style:"Fantasy",tags:["emergency"],size:"medium",rotation:0,dbLoaded:!0,localLikes:0,localViews:0,localComments:0,localIsLiked:!1}]}),[M,L]=(0,s.useState)([]),[D,P]=(0,s.useState)(1),[Z,F]=(0,s.useState)(!1),[R,E]=(0,s.useState)(!1),[G,T]=(0,s.useState)(null),[V,H]=(0,s.useState)([]),[U,q]=(0,s.useState)(!1),[W,B]=(0,s.useState)("all"),[J,Y]=(0,s.useState)(""),[K,X]=(0,s.useState)(!1),[Q,ee]=(0,s.useState)(!1),[et,ea]=(0,s.useState)(!1),[er,es]=(0,s.useState)(!1),[el,eo]=(0,s.useState)("idle"),[ei,en]=(0,s.useState)(""),[ec,ed]=(0,s.useState)(!1);(0,s.useCallback)(e=>{try{console.log("\uD83D\uDD04 同步localStorage数据..."),$(e=>e.map(e=>{try{let t=parseInt(localStorage.getItem(`gallery_likes_${e.id}`)||"0"),a=parseInt(localStorage.getItem(`gallery_views_${e.id}`)||"0"),r=parseInt(localStorage.getItem(`gallery_comments_${e.id}`)||"0"),s="true"===localStorage.getItem(`gallery_liked_${e.id}`);return{...e,localLikes:Math.max(t,e.localLikes||0),localViews:Math.max(a,e.localViews||0),localComments:Math.max(r,e.localComments||0),localIsLiked:s||e.localIsLiked}}catch(t){return e}}))}catch(e){console.warn("⚠️ localStorage同步失败:",e)}},[]),(0,s.useCallback)(async e=>{try{console.log("\uD83D\uDD04 加载数据库统计信息...");let t=e.map(e=>e.id.toString()),a=await O.getBatchImageStats(t);console.log(`✅ 数据库统计加载成功: ${Object.keys(a).length}张图片`),$(e=>e.map(e=>{let t=a[e.id.toString()];return{...e,dbStats:t||{id:e.id.toString(),likes:0,comments:0,views:0,isLiked:!1},dbLoaded:!0,localLikes:t?.likes||0,localIsLiked:t?.isLiked||!1,localViews:t?.views||0,localComments:t?.comments||0}}))}catch(e){console.warn("⚠️ 数据库统计加载失败，显示默认数值:",e),$(e=>e.map(e=>({...e,dbLoaded:!0,localLikes:0,localIsLiked:!1,localViews:0,localComments:0})))}},[]);let em=(0,s.useMemo)(()=>{let e=a;if("all"!==W&&(e=e.filter(e=>e.style.toLowerCase()===W.toLowerCase())),J){let t=J.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.author.toLowerCase().includes(t)||e.tags.some(e=>e.toLowerCase().includes(t)))}return e},[a,W,J]),eg=(0,s.useCallback)(()=>{if(Z)return;let e=D+1,t=12*D,a=em.slice(t,t+12);0!==a.length&&(F(!0),setTimeout(()=>{L(e=>[...e,...a]),P(e),F(!1)},500))},[Z,D,em]),eu=M.length<em.length,eh=(0,s.useMemo)(()=>M.map((e,t)=>({id:e.id,url:e.url,title:e.title,height:K?"vertical"===e.size?350:"horizontal"===e.size?200:"large"===e.size?380:"small"===e.size?250:300:Math.max(280,({vertical:550,horizontal:300,large:600,small:350,medium:450}[e.size]||450)+(t%5*25-50)),...e})),[M,K]),ep=(0,s.useCallback)(async e=>{let t=e.toString();console.log(`❤️ 点赞图片: ${t}`);let a=e=>{if(e.id.toString()===t){let t=!e.localIsLiked,a=t?e.localLikes+1:Math.max(0,e.localLikes-1);return{...e,localIsLiked:t,localLikes:a}}return e};L(e=>e.map(a)),$(e=>e.map(a)),G&&G.id.toString()===t&&T(e=>e?a(e):null);try{let e=await O.toggleImageLike(t);if(e.success){console.log(`✅ 点赞同步成功: ${e.liked}`);let a=a=>a.id.toString()===t?{...a,localIsLiked:e.liked,localLikes:e.newCount,dbLoaded:!0}:a;L(e=>e.map(a)),$(e=>e.map(a)),G&&G.id.toString()===t&&T(e=>e?a(e):null)}else console.warn("⚠️ 点赞同步失败，但UI已更新")}catch(e){console.warn("⚠️ 点赞同步异常，但UI已更新:",e)}},[G]),ex=(0,s.useCallback)(async e=>{T(e),console.log(`🖼️ 打开图片详情: ${e.title}`);let t=e.id.toString(),a=e=>e.id.toString()===t?{...e,localViews:e.localViews+1}:e;L(e=>e.map(a)),$(e=>e.map(a));try{await O.incrementImageView(t),console.log("✅ 浏览量同步成功")}catch(e){console.warn("⚠️ 浏览量同步失败:",e)}ef(t)},[]),ef=(0,s.useCallback)(async e=>{q(!0);try{console.log(`💬 加载图片评论: ${e}`);let t=await O.getImageComments(e);H(t),console.log(`✅ 评论加载成功: ${t.length}条`)}catch(e){console.warn("⚠️ 评论加载失败:",e),H([])}finally{q(!1)}},[]),ey=(0,s.useCallback)(async()=>{if(!G||!ei.trim()||ec)return;let e=ei.trim(),t=G.id.toString();if(e.length>500){alert("评论内容不能超过500字符");return}ed(!0);try{console.log(`💬 提交评论: ${t}, 内容: "${e.substring(0,50)}..."`);let a=await O.addImageComment(t,e);if(a){H(e=>[a,...e]),en("");let e=e=>e.id.toString()===t?{...e,localComments:e.localComments+1}:e;L(t=>t.map(e)),$(t=>t.map(e)),console.log("✅ 评论提交成功")}else console.warn("⚠️ 评论提交失败：服务器返回空结果"),alert("评论提交失败，请稍后重试")}catch(t){console.error("❌ 评论提交异常:",t);let e=t?.message||"网络错误";alert(`评论提交失败: ${e}`)}finally{ed(!1)}},[G,ei,ec]),eb=(0,s.useCallback)(async e=>{try{let t=t=>{if(t.id===e){let e=!t.isLiked,a=e?t.likes+1:Math.max(0,t.likes-1);return{...t,isLiked:e,likes:a}}return t};H(e=>e.map(t));let a=await O.toggleCommentLike(e);a.success?(console.log("✅ 评论点赞成功"),H(t=>t.map(t=>t.id===e?{...t,isLiked:a.liked,likes:a.newCount}:t))):console.warn("⚠️ 评论点赞同步失败，但UI已更新")}catch(e){console.warn("⚠️ 评论点赞异常，但UI已更新:",e)}},[]),ew=(0,s.useCallback)(async()=>{if(!G)return;ea(!0);let e=`${window.location.origin}/gallery#image-${G.id}`,t={title:`${G.title} - AIMAGICA Gallery`,text:`🎨 Amazing AI artwork: "${G.title}" by ${G.author}\\n✨ Created with AI magic - check it out in our gallery!`,url:e};try{navigator.share&&K?(await navigator.share(t),eo("shared")):(await navigator.clipboard.writeText(e),eo("copied")),setTimeout(()=>eo("idle"),2e3)}catch(e){console.warn("分享失败:",e)}ea(!1)},[G,K]),ev=(0,s.useCallback)(async()=>{if(G){es(!0);try{let e=await fetch(G.url),t=await e.blob(),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`aimagica-${G.title.replace(/[^a-zA-Z0-9]/g,"-")}-${G.id}.png`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a)}catch(e){window.open(G.url,"_blank")}es(!1)}},[G]),ek=(0,s.useCallback)((e,t)=>r.jsx(z,{id:e.id,url:e.url,title:e.title,author:e.author,likes:e.localLikes,views:e.localViews,isPremium:e.isPremium,isFeatured:e.isFeatured,isLiked:e.localIsLiked,createdAt:e.createdAt,size:e.size,rotation:e.rotation,onClick:()=>ex(e),priority:t<8,waterfallHeight:e.height},e.id),[ex]);return(0,r.jsxs)("div",{className:"min-h-screen bg-black",children:[r.jsx("header",{className:"p-4 md:p-6 bg-[#0a0a0a] border-b border-[#333] sticky top-0 z-50",children:r.jsx("div",{className:"container mx-auto",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 cursor-pointer transform hover:scale-105 transition-all",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx("img",{src:t,alt:"AIMAGICA",className:"w-8 h-8 md:w-10 md:h-10 rounded-lg shadow-lg transform rotate-3 hover:rotate-0 transition-all"}),r.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-[#d4a574] rounded-full animate-pulse"})]}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-lg md:text-xl font-black text-white transform -rotate-1",style:{textShadow:"2px 2px 0px #333"},children:"AIMAGICA"}),r.jsx("p",{className:"text-xs text-gray-400 transform rotate-1",children:"Magic Gallery ✨"})]})]}),r.jsx("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(i.I,{placeholder:"Search magical creations...",value:J,onChange:e=>Y(e.target.value),className:"pl-10 w-64 bg-[#1a1a1a] border-2 border-[#444] text-white placeholder:text-gray-400 rounded-xl font-bold"})]})})]})})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 md:px-6 py-6 md:py-8",children:[r.jsx("div",{className:"mb-8 flex flex-wrap gap-4 items-start",children:r.jsx(d.mQ,{value:W,onValueChange:B,className:"flex-1 min-w-[200px]",children:(0,r.jsxs)(d.dr,{className:"bg-[#1a1a1a] border-2 border-[#444] rounded-xl p-1 flex flex-wrap gap-1",children:[r.jsx(d.SP,{value:"all",className:"rounded-lg font-bold data-[state=active]:bg-[#d4a574] data-[state=active]:text-black text-gray-300 text-xs md:text-sm transform rotate-1 hover:scale-105 transition-all",children:"All Magic"}),r.jsx(d.SP,{value:"fantasy",className:"rounded-lg font-bold data-[state=active]:bg-[#d4a574] data-[state=active]:text-black text-gray-300 text-xs md:text-sm transform rotate-0.5 hover:scale-105 transition-all",children:"Fantasy \uD83E\uDDD9‍♂️"}),r.jsx(d.SP,{value:"cyberpunk",className:"rounded-lg font-bold data-[state=active]:bg-[#d4a574] data-[state=active]:text-black text-gray-300 text-xs md:text-sm transform -rotate-0.5 hover:scale-105 transition-all",children:"Cyberpunk \uD83E\uDD16"}),r.jsx(d.SP,{value:"sci-fi",className:"rounded-lg font-bold data-[state=active]:bg-[#d4a574] data-[state=active]:text-black text-gray-300 text-xs md:text-sm transform -rotate-1 hover:scale-105 transition-all",children:"Sci-Fi \uD83D\uDE80"})]})})}),(0,r.jsxs)(l.E.div,{className:"mb-6 flex items-center justify-between bg-[#1a1a1a] rounded-xl p-4 border-2 border-[#444]",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(u.Z,{className:"w-5 h-5 text-[#d4a574]"}),(0,r.jsxs)("span",{className:"text-white font-bold",children:[M.length," of ",em.length," artworks"]})]}),Q?r.jsx(c.C,{variant:"outline",className:"bg-orange-500/20 text-orange-300 border-orange-500",children:"Offline Mode"}):r.jsx(c.C,{variant:"outline",className:"bg-green-500/20 text-green-300 border-green-500",children:"Database Connected"}),J&&(0,r.jsxs)(c.C,{variant:"outline",className:"bg-[#2a2a2a] text-gray-300",children:['Search: "',J,'"']})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-gray-400 text-sm",children:[r.jsx(h.Z,{className:"w-4 h-4"}),r.jsx("span",{children:"Enhanced gallery"})]})]}),r.jsx(_,{items:eh,columns:K?2:4,gap:K?12:16,itemMinWidth:K?150:250,renderItem:ek,onLoadMore:eg,hasMore:eu,loading:Z,initialRenderCount:12,className:"mb-8"}),0===em.length&&(0,r.jsxs)(l.E.div,{className:"text-center py-16",initial:{opacity:0},animate:{opacity:1},children:[r.jsx("div",{className:"text-6xl mb-4",children:"\uD83C\uDFA8"}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No artworks found"}),r.jsx("p",{className:"text-gray-400",children:"Try adjusting your search or filter criteria"})]})]}),r.jsx(n.Vq,{open:!!G,onOpenChange:e=>{e||T(null)},children:(0,r.jsxs)(n.cZ,{className:"max-w-4xl w-[95vw] max-h-[90vh] bg-black p-0 rounded-2xl border-4 border-[#333] shadow-2xl overflow-hidden flex flex-col",children:[r.jsx(n.$N,{style:{position:"absolute",width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0},children:G?.title||"Image Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-0 flex-1 min-h-0",children:[r.jsx("div",{className:"relative bg-black rounded-l-xl md:rounded-r-none overflow-hidden flex-shrink-0 h-64 md:h-auto",children:G&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("img",{src:G.url,alt:G.title,className:"w-full h-full object-contain",loading:"eager"}),(0,r.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4",children:[r.jsx("h2",{className:"text-lg md:text-xl font-black text-white mb-1 transform -rotate-1",style:{textShadow:"2px 2px 0px #333"},children:G.title}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("img",{src:(0,S.H)(G.authorAvatar),alt:G.author,className:"w-6 h-6 rounded-full border-2 border-[#444]",onError:e=>{e.currentTarget.src=(0,S.lS)(G.author)}}),(0,r.jsxs)("p",{className:"text-[#d4a574] font-bold text-sm",children:["by ",G.author]}),G.isPremium&&r.jsx(p.Z,{className:"w-4 h-4 text-[#d4a574]"})]})]})]})}),r.jsx("div",{className:"p-4 md:p-6 overflow-y-auto bg-[#0a0a0a] flex-1 min-h-0",children:G&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.fK,{className:"border-b border-[#333] pb-4 mb-4",children:r.jsx(n.$N,{className:"text-xl font-black text-white",children:G.title})}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3 mb-6",children:[(0,r.jsxs)(o.z,{size:"sm",onClick:()=>ep(G.id),className:`flex items-center space-x-1 transform rotate-1 ${G.localIsLiked?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-[#1a1a1a] text-white hover:bg-[#2a2a2a]"} font-bold rounded-lg border-2 border-[#444]`,style:{boxShadow:"2px 2px 0 #333"},children:[r.jsx(x.Z,{className:"w-4 h-4",fill:G.localIsLiked?"currentColor":"none"}),r.jsx("span",{children:G.localLikes})]}),(0,r.jsxs)("span",{className:"flex items-center text-gray-300 font-bold transform -rotate-1 bg-[#1a1a1a] px-2 py-1 rounded-lg border-2 border-[#444]",style:{boxShadow:"1px 1px 0 #333"},children:[r.jsx(f.Z,{className:"w-4 h-4 mr-1"}),G.localComments]}),(0,r.jsxs)("span",{className:"flex items-center text-gray-300 font-bold transform rotate-0.5 bg-[#1a1a1a] px-2 py-1 rounded-lg border-2 border-[#444]",style:{boxShadow:"1px 1px 0 #333"},children:[r.jsx(y.Z,{className:"w-4 h-4 mr-1"}),G.localViews]}),r.jsx("span",{className:"ml-auto text-gray-400 font-bold text-sm transform -rotate-1",children:G.createdAt})]}),(0,r.jsxs)("div",{className:"mb-6 transform rotate-0.5",children:[r.jsx("h3",{className:"text-white font-black mb-3 transform -rotate-1",style:{textShadow:"1px 1px 0px #333"},children:"Magic Prompt ✨"}),r.jsx("div",{className:"p-4 bg-[#1a1a1a] border-2 border-[#444] shadow-md",style:{borderRadius:"16px",clipPath:"polygon(0% 0%, 100% 2%, 99% 98%, 1% 100%)"},children:(0,r.jsxs)("p",{className:"text-gray-200 font-bold text-sm leading-relaxed",children:['"',G.prompt,'"']})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-white font-black mb-3 transform rotate-0.5",style:{textShadow:"1px 1px 0px #333"},children:"Magic Tags \uD83C\uDFF7️"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[r.jsx(c.C,{className:"bg-[#d4a574] text-black font-black transform rotate-1",style:{boxShadow:"1px 1px 0 #333"},children:G.style}),G.tags.map((e,t)=>(0,r.jsxs)(c.C,{variant:"outline",className:"bg-[#1a1a1a] border-2 border-[#444] text-gray-300 font-bold hover:bg-[#2a2a2a]",style:{transform:`rotate(${t%3-1}deg)`},children:["#",e]},t))]})]}),(0,r.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,r.jsxs)(o.z,{onClick:ew,disabled:et,className:"bg-[#4a5a4a] hover:bg-[#5a6a5a] text-white font-black rounded-xl flex-1 border-2 border-[#666] transform -rotate-0.5 hover:scale-105 transition-all disabled:opacity-50",style:{boxShadow:"2px 2px 0 #333"},children:["copying"===el?r.jsx(b.Z,{className:"w-4 h-4 mr-2 animate-pulse"}):"copied"===el?r.jsx(w.Z,{className:"w-4 h-4 mr-2 text-green-400"}):"shared"===el?r.jsx(w.Z,{className:"w-4 h-4 mr-2 text-blue-400"}):r.jsx(v.Z,{className:"w-4 h-4 mr-2"}),"copied"===el?"Copied!":"shared"===el?"Shared!":et?"Sharing...":"Share"]}),(0,r.jsxs)(o.z,{onClick:ev,disabled:er,className:"bg-[#d4a574] hover:bg-[#c19660] text-black font-black rounded-xl flex-1 transform rotate-0.5 hover:scale-105 transition-all disabled:opacity-50",style:{boxShadow:"2px 2px 0 #333"},children:[r.jsx(k.Z,{className:`w-4 h-4 mr-2 ${er?"animate-bounce":""}`}),er?"Downloading...":"Download"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-white font-black mb-4 transform -rotate-0.5",style:{textShadow:"1px 1px 0px #333"},children:["Magic Comments \uD83D\uDCAC",U&&r.jsx("span",{className:"text-sm text-gray-400 ml-2",children:"Loading..."})]}),(0,r.jsxs)("div",{className:"mb-6 p-4 bg-[#1a1a1a] border-2 border-[#444] rounded-xl",children:[r.jsx(m.g,{placeholder:"Share your thoughts about this magical artwork...",value:ei,onChange:e=>en(e.target.value),className:"bg-[#2a2a2a] border border-[#555] text-white placeholder:text-gray-400 resize-none mb-3",rows:3,maxLength:500}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-xs text-gray-400",children:[ei.length,"/500"]}),(0,r.jsxs)(o.z,{onClick:ey,disabled:!ei.trim()||ec,size:"sm",className:"bg-[#d4a574] hover:bg-[#c19660] text-black font-bold",children:[ec?r.jsx(j.Z,{className:"w-4 h-4 mr-2 animate-spin"}):r.jsx(N.Z,{className:"w-4 h-4 mr-2"}),ec?"Adding...":"Add Comment"]})]})]}),r.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:U?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCAC"}),r.jsx("p",{className:"text-gray-400",children:"Loading comments..."})]}):V.length>0?V.map((e,t)=>r.jsx("div",{className:"bg-[#1a1a1a] rounded-xl p-4 border-2 border-[#444] shadow-md",style:{transform:`rotate(${t%3-1}deg)`,boxShadow:`${t%3-1}px ${t%2+1}px 0 #333`},children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("img",{src:(0,S.H)(e.authorAvatar),alt:e.author,className:"w-8 h-8 rounded-full border-2 border-[#444]",onError:t=>{t.currentTarget.src=(0,S.lS)(e.author)}}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("div",{className:"flex justify-between items-start",children:(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-white font-black text-sm",children:e.author}),r.jsx("span",{className:"text-gray-400 font-bold text-xs ml-2",children:new Date(e.createdAt).toLocaleDateString()})]})}),r.jsx("p",{className:"text-gray-200 font-bold text-sm mt-1",children:e.content}),r.jsx("div",{className:"flex items-center justify-between mt-2",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(o.z,{size:"sm",variant:"ghost",onClick:()=>eb(e.id),className:`flex items-center space-x-1 p-1 hover:bg-[#2a2a2a] rounded transition-all ${e.isLiked?"text-red-400 hover:text-red-300":"text-gray-400 hover:text-white"}`,children:[r.jsx(I,{className:`w-3 h-3 transition-transform hover:scale-110 ${e.isLiked?"fill-current":""}`}),r.jsx("span",{className:"text-xs font-bold",children:e.likes})]}),r.jsx("span",{className:"text-gray-500 text-xs",children:"•"}),r.jsx("span",{className:"text-gray-400 font-bold text-xs",children:"Reply"})]})})]})]})},e.id)):r.jsx("p",{className:"text-center text-gray-500 py-8",children:"No comments yet. Be the first to share your thoughts!"})})]})]})})]})]})})]})}},59637:(e,t,a)=>{"use strict";a.d(t,{C:()=>i});var r=a(39543);a(13872);var s=a(89382),l=a(90594);let o=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...a}){return r.jsx("div",{className:(0,l.cn)(o({variant:t}),e),...a})}},17937:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>i,SZ:()=>c,Zb:()=>o,aY:()=>d,ll:()=>n});var r=a(39543),s=a(13872),l=a(90594);let o=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));o.displayName="Card";let i=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let n=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));n.displayName="CardTitle";let c=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let d=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,l.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",s.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},55109:(e,t,a)=>{"use strict";a.d(t,{$N:()=>h,Vq:()=>n,cZ:()=>g,fK:()=>u,hg:()=>c});var r=a(39543),s=a(13872),l=a(77020),o=a(8038),i=a(90594);let n=l.fC,c=l.xz,d=l.h_;l.x8;let m=s.forwardRef(({className:e,...t},a)=>r.jsx(l.aV,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));m.displayName=l.aV.displayName;let g=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(d,{children:[r.jsx(m,{}),(0,r.jsxs)(l.VY,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,(0,r.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground bg-gray-800 hover:bg-gray-700 text-white border border-gray-600 hover:border-gray-500 p-1",children:[r.jsx(o.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));g.displayName=l.VY.displayName;let u=({className:e,...t})=>r.jsx("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});u.displayName="DialogHeader";let h=s.forwardRef(({className:e,...t},a)=>r.jsx(l.Dx,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));h.displayName=l.Dx.displayName,s.forwardRef(({className:e,...t},a)=>r.jsx(l.dk,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...t})).displayName=l.dk.displayName},52188:(e,t,a)=>{"use strict";a.d(t,{I:()=>o});var r=a(39543),s=a(13872),l=a(90594);let o=s.forwardRef(({className:e,type:t,...a},s)=>r.jsx("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...a}));o.displayName="Input"},34579:(e,t,a)=>{"use strict";a.d(t,{SP:()=>c,dr:()=>n,mQ:()=>i,nU:()=>d});var r=a(39543),s=a(13872),l=a(4547),o=a(90594);let i=l.fC,n=s.forwardRef(({className:e,...t},a)=>r.jsx(l.aV,{ref:a,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));n.displayName=l.aV.displayName;let c=s.forwardRef(({className:e,...t},a)=>r.jsx(l.xz,{ref:a,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));c.displayName=l.xz.displayName;let d=s.forwardRef(({className:e,...t},a)=>r.jsx(l.VY,{ref:a,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));d.displayName=l.VY.displayName},28338:(e,t,a)=>{"use strict";a.d(t,{g:()=>o});var r=a(39543),s=a(13872),l=a(90594);let o=s.forwardRef(({className:e,...t},a)=>r.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...t}));o.displayName="Textarea"},68346:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>s});var r=a(13872);let s=function(e){return(0,r.useMemo)(()=>e.startsWith("/")?e:`/${e}`,[e])}},27594:(e,t,a)=>{"use strict";function r(e){if(!e)return"/images/aimagica-logo.png";if(e.includes("googleusercontent.com")){let t=encodeURIComponent(e);return`/api/proxy/avatar?url=${t}`}return e}function s(e){let t=e?.charAt(0)?.toUpperCase()||"U";return`/placeholder.svg?height=40&width=40&text=${t}`}a.d(t,{H:()=>r,lS:()=>s})},45001:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},737:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},62804:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},31299:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},34267:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},30237:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},41431:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},77093:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},95350:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},14257:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},35934:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},32080:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},38801:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},55790:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},41563:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]])},8038:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(72930).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2597:(e,t,a)=>{"use strict";function r(){return null}a.r(t),a.d(t,{default:()=>r})},75603:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o,metadata:()=>l});var r=a(23740);let s=(0,a(2814).createProxy)(String.raw`/mnt/d/cursor/aitoimage/ai-sketch-platform/app/gallery/new-gallery-client.tsx#default`),l={title:"AI Gallery - AIMAGICA | High-Performance AI Art Gallery",description:"Explore our high-performance AI art gallery with virtual waterfall layout, lazy loading, and seamless browsing. Discover thousands of AI-generated artworks with lightning-fast performance.",keywords:"AI art gallery, high performance gallery, virtual scrolling, lazy loading, AI generated images, digital art, artificial intelligence art, AI artwork showcase, fast gallery, responsive design",authors:[{name:"AIMAGICA"}],creator:"AIMAGICA",publisher:"AIMAGICA",formatDetection:{email:!1,address:!1,telephone:!1},openGraph:{title:"AI Gallery - AIMAGICA | High-Performance AI Art Gallery",description:"Explore our high-performance AI art gallery with virtual waterfall layout and lazy loading",url:"https://aimagica.ai/gallery",siteName:"AIMAGICA",images:[{url:"https://aimagica.ai/images/aimagica-logo.png",width:1200,height:630,alt:"AIMAGICA Gallery - High-Performance AI Art Gallery"}],locale:"en_US",type:"website"},twitter:{card:"summary_large_image",title:"AI Gallery - AIMAGICA | High-Performance AI Art Gallery",description:"Explore our high-performance AI art gallery with virtual waterfall layout and lazy loading",images:["https://aimagica.ai/images/aimagica-logo.png"]},robots:{index:!0,follow:!0,googleBot:{index:!0,follow:!0,"max-video-preview":-1,"max-image-preview":"large","max-snippet":-1}}};function o(){return r.jsx(s,{})}},77020:(e,t,a)=>{"use strict";a.d(t,{Dx:()=>ea,VY:()=>et,aV:()=>ee,dk:()=>er,fC:()=>K,h_:()=>Q,x8:()=>es,xz:()=>X});var r=a(13872),s=a(55671),l=a(89904),o=a(64049),i=a(62166),n=a(70868),c=a(18586),d=a(47025),m=a(30441),g=a(50720),u=a(49784),h=a(34571),p=a(42746),x=a(9737),f=a(57115),y=a(39543),b="Dialog",[w,v]=(0,o.b)(b),[k,j]=w(b),N=e=>{let{__scopeDialog:t,children:a,open:s,defaultOpen:l,onOpenChange:o,modal:c=!0}=e,d=r.useRef(null),m=r.useRef(null),[g=!1,u]=(0,n.T)({prop:s,defaultProp:l,onChange:o});return(0,y.jsx)(k,{scope:t,triggerRef:d,contentRef:m,contentId:(0,i.M)(),titleId:(0,i.M)(),descriptionId:(0,i.M)(),open:g,onOpenChange:u,onOpenToggle:r.useCallback(()=>u(e=>!e),[u]),modal:c,children:a})};N.displayName=b;var I="DialogTrigger",A=r.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,o=j(I,a),i=(0,l.e)(t,o.triggerRef);return(0,y.jsx)(u.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":U(o.open),...r,ref:i,onClick:(0,s.M)(e.onClick,o.onOpenToggle)})});A.displayName=I;var S="DialogPortal",[C,$]=w(S,{forceMount:void 0}),_=e=>{let{__scopeDialog:t,forceMount:a,children:s,container:l}=e,o=j(S,t);return(0,y.jsx)(C,{scope:t,forceMount:a,children:r.Children.map(s,e=>(0,y.jsx)(g.z,{present:a||o.open,children:(0,y.jsx)(m.h,{asChild:!0,container:l,children:e})}))})};_.displayName=S;var M="DialogOverlay",L=r.forwardRef((e,t)=>{let a=$(M,e.__scopeDialog),{forceMount:r=a.forceMount,...s}=e,l=j(M,e.__scopeDialog);return l.modal?(0,y.jsx)(g.z,{present:r||l.open,children:(0,y.jsx)(D,{...s,ref:t})}):null});L.displayName=M;var D=r.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,s=j(M,a);return(0,y.jsx)(p.Z,{as:f.g7,allowPinchZoom:!0,shards:[s.contentRef],children:(0,y.jsx)(u.WV.div,{"data-state":U(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),P="DialogContent",z=r.forwardRef((e,t)=>{let a=$(P,e.__scopeDialog),{forceMount:r=a.forceMount,...s}=e,l=j(P,e.__scopeDialog);return(0,y.jsx)(g.z,{present:r||l.open,children:l.modal?(0,y.jsx)(Z,{...s,ref:t}):(0,y.jsx)(F,{...s,ref:t})})});z.displayName=P;var Z=r.forwardRef((e,t)=>{let a=j(P,e.__scopeDialog),o=r.useRef(null),i=(0,l.e)(t,a.contentRef,o);return r.useEffect(()=>{let e=o.current;if(e)return(0,x.Ry)(e)},[]),(0,y.jsx)(R,{...e,ref:i,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,s.M)(e.onCloseAutoFocus,e=>{e.preventDefault(),a.triggerRef.current?.focus()}),onPointerDownOutside:(0,s.M)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,s.M)(e.onFocusOutside,e=>e.preventDefault())})}),F=r.forwardRef((e,t)=>{let a=j(P,e.__scopeDialog),s=r.useRef(!1),l=r.useRef(!1);return(0,y.jsx)(R,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||a.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,l.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"!==t.detail.originalEvent.type||(l.current=!0));let r=t.target;a.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&l.current&&t.preventDefault()}})}),R=r.forwardRef((e,t)=>{let{__scopeDialog:a,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,...n}=e,m=j(P,a),g=r.useRef(null),u=(0,l.e)(t,g);return(0,h.EW)(),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(d.M,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:o,onUnmountAutoFocus:i,children:(0,y.jsx)(c.XB,{role:"dialog",id:m.contentId,"aria-describedby":m.descriptionId,"aria-labelledby":m.titleId,"data-state":U(m.open),...n,ref:u,onDismiss:()=>m.onOpenChange(!1)})}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(J,{titleId:m.titleId}),(0,y.jsx)(Y,{contentRef:g,descriptionId:m.descriptionId})]})]})}),E="DialogTitle",G=r.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,s=j(E,a);return(0,y.jsx)(u.WV.h2,{id:s.titleId,...r,ref:t})});G.displayName=E;var O="DialogDescription",T=r.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,s=j(O,a);return(0,y.jsx)(u.WV.p,{id:s.descriptionId,...r,ref:t})});T.displayName=O;var V="DialogClose",H=r.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,l=j(V,a);return(0,y.jsx)(u.WV.button,{type:"button",...r,ref:t,onClick:(0,s.M)(e.onClick,()=>l.onOpenChange(!1))})});function U(e){return e?"open":"closed"}H.displayName=V;var q="DialogTitleWarning",[W,B]=(0,o.k)(q,{contentName:P,titleName:E,docsSlug:"dialog"}),J=({titleId:e})=>{let t=B(q),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return r.useEffect(()=>{e&&!document.getElementById(e)&&console.error(a)},[a,e]),null},Y=({contentRef:e,descriptionId:t})=>{let a=B("DialogDescriptionWarning"),s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a.contentName}}.`;return r.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&!document.getElementById(t)&&console.warn(s)},[s,e,t]),null},K=N,X=A,Q=_,ee=L,et=z,ea=G,er=T,es=H}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[347,292,547,55,773],()=>a(51231));module.exports=r})();