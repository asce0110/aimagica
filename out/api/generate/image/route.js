"use strict";(()=>{var e={};e.id=9293,e.ids=[9293],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},21287:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>g,patchFetch:()=>m,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>d,staticGenerationAsyncStorage:()=>c});var r={};a.r(r),a.d(r,{POST:()=>p});var o=a(8258),n=a(78383),s=a(85806),i=a(12283);async function p(e){try{let t=await e.json();console.log("\uD83C\uDFA8 代理生图请求到Workers API"),console.log("\uD83D\uDCCA 请求数据:",{prompt:t.prompt?.substring(0,50)+"...",styleId:t.styleId,modelId:t.modelId,aspectRatio:t.aspectRatio,imageCount:t.imageCount});let a=await fetch("https://aimagica-api.403153162.workers.dev/api/generate/image",{method:"POST",headers:{"Content-Type":"application/json","User-Agent":"aimagica-frontend",Origin:"https://aimagica.ai"},body:JSON.stringify(t)});if(!a.ok){console.error("❌ Workers API生图错误:",a.status,a.statusText);let e=await a.text();return console.error("❌ 错误详情:",e),i.NextResponse.json({error:"Failed to generate image",details:e},{status:a.status})}let r=a.headers.get("content-type");if(r?.includes("text/plain"))return console.log("\uD83D\uDCE1 转发流式响应"),new Response(a.body,{status:a.status,headers:{"Content-Type":"text/plain","Cache-Control":"no-cache",Connection:"keep-alive"}});{let e=await a.json();return console.log("✅ 生图请求成功"),i.NextResponse.json(e)}}catch(e){return console.error("❌ 生图代理错误:",e),i.NextResponse.json({error:"Internal server error",details:e.message},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/generate/image/route",pathname:"/api/generate/image",filename:"route",bundlePath:"app/api/generate/image/route"},resolvedPagePath:"/mnt/d/cursor/aitoimage/ai-sketch-platform/app/api/generate/image/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:c,serverHooks:d}=u,g="/api/generate/image/route";function m(){return(0,s.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:c})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[9613,7038],()=>a(21287));module.exports=r})();