(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8184],{51339:function(e,s,t){Promise.resolve().then(t.bind(t,2511))},2511:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return N}});var r=t(18376),n=t(57894),a=t(95801),i=t(65354),l=t(31554),c=t(41775),o=t(44911),d=t(46859),u=t(92392),p=t(82878),f=t(53922),h=t(38049);let m=(0,t(37020).Z)("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);var x=t(93560),v=t(99806),j=t(37929),g=t(16270),y=t(95520),b=t(73280);function N(){var e,s,t,N,w,k,C,S,P,_,T,R,E,A,U,Z,I,O;let[z,D]=(0,n.useState)([]),[F,M]=(0,n.useState)([]),[Q,V]=(0,n.useState)(!0),[G,B]=(0,n.useState)(null),[Y,W]=(0,n.useState)(null),[q,H]=(0,n.useState)(!1),[K,L]=(0,n.useState)(!1),[J,X]=(0,n.useState)(""),{toast:$}=(0,b.pm)(),[ee,es]=(0,n.useState)({name:"",type:"stripe",enabled:!0,priority:1,config:{environment:"sandbox",supportedCurrencies:["USD"],supportedCountries:["US"]},features:{subscription:!0,oneTime:!0,refund:!0,webhook:!0}}),[et,er]=(0,n.useState)({name:"",description:"",type:"premium",price:0,currency:"USD",interval:"month",enabled:!0,popular:!1,features:{imageGenerations:100,highResolution:!0,advancedStyles:!0,priorityQueue:!1,apiAccess:!1,commercialUse:!1}});(0,n.useEffect)(()=>{en(),console.log("检查用户认证状态..."),fetch("/api/debug/auth",{credentials:"include"}).then(e=>e.json()).then(e=>{var s,t;console.log("=== 前端认证调试信息 ==="),console.log("完整数据:",JSON.stringify(e,null,2)),console.log("用户认证状态:",e.authenticated),console.log("用户信息:",e.user),console.log("管理员检查:",e.adminCheck),(null===(s=e.user)||void 0===s?void 0:s.email)&&X(e.user.email),e.authenticated?e.adminCheck?console.log("✅ 用户认证和管理员权限正常"):console.error("⚠️ 用户不是管理员！",null===(t=e.user)||void 0===t?void 0:t.email):console.error("⚠️ 用户未认证！")}).catch(e=>console.error("获取认证调试信息失败:",e))},[]);let en=async()=>{try{let[e,s]=await Promise.all([fetch("/api/admin/payment/providers"),fetch("/api/admin/payment/plans")]);if(e.ok){let s=await e.json();D(s)}if(s.ok){let e=await s.json();M(e)}}catch(e){console.error("加载数据失败:",e),$({title:"加载失败",description:"无法加载支付配置数据",variant:"destructive"})}finally{V(!1)}},ea=async()=>{try{console.log("Saving provider:",ee);let e=G?"PUT":"POST",s=G?"/api/admin/payment/providers/".concat(G.id):"/api/admin/payment/providers";console.log("Request URL:",s,"Method:",e);let t=await fetch(s,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify({...ee,userEmail:J})});if(console.log("Response status:",t.status),t.ok){let e=await t.json();console.log("Save result:",e),$({title:"Save Successful",description:"Payment provider ".concat(G?"updated":"created"," successfully")}),H(!1),B(null),en()}else{let e=await t.text();throw console.error("Save error:",e),Error("Save failed: ".concat(t.status," ").concat(e))}}catch(e){console.error("Save provider error:",e),$({title:"Save Failed",description:e instanceof Error?e.message:"Unable to save payment provider configuration",variant:"destructive"})}},ei=async()=>{try{console.log("Saving plan:",et);let e=Y?"PUT":"POST",s=Y?"/api/admin/payment/plans/".concat(Y.id):"/api/admin/payment/plans";console.log("Request URL:",s,"Method:",e);let t=await fetch(s,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(et)});if(console.log("Response status:",t.status),t.ok){let e=await t.json();console.log("Save result:",e),$({title:"Save Successful",description:"Subscription plan ".concat(Y?"updated":"created"," successfully")}),L(!1),W(null),en()}else{let e=await t.text();throw console.error("Save error:",e),Error("Save failed: ".concat(t.status," ").concat(e))}}catch(e){console.error("Save plan error:",e),$({title:"Save Failed",description:"无法保存订阅计划配置",variant:"destructive"})}},el=async e=>{try{if((await fetch("/api/admin/payment/providers/".concat(e,"/test"),{method:"POST"})).ok)$({title:"Test Successful",description:"Payment provider connection is working"});else throw Error("Test failed")}catch(e){$({title:"Test Failed",description:"Unable to connect to payment provider",variant:"destructive"})}},ec=async(e,s)=>{if(confirm('Are you sure you want to delete "'.concat(s,'"? This action cannot be undone.')))try{let t=await fetch("/api/admin/payment/providers/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:J})}),r=await t.json();if(t.ok)$({title:"Delete Successful",description:'Payment provider "'.concat(s,'" deleted successfully')}),en();else throw Error(r.error||"Delete failed")}catch(e){$({title:"Delete Failed",description:e instanceof Error?e.message:"Unable to delete payment provider",variant:"destructive"})}},eo=e=>{switch(e.status){case"active":return(0,r.jsx)(h.Z,{className:"h-4 w-4 text-green-500"});case"testing":return(0,r.jsx)(m,{className:"h-4 w-4 text-yellow-500"});case"error":return(0,r.jsx)(x.Z,{className:"h-4 w-4 text-red-500"});default:return(0,r.jsx)(v.Z,{className:"h-4 w-4 text-gray-500"})}};return Q?(0,r.jsx)("div",{className:"flex justify-center items-center h-96",children:"加载中..."}):(0,r.jsxs)("div",{className:"container mx-auto p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Payment System Administration"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"管理支付提供商和订阅计划配置"})]}),(0,r.jsxs)(u.mQ,{defaultValue:"providers",className:"space-y-6",children:[(0,r.jsxs)(u.dr,{children:[(0,r.jsx)(u.SP,{value:"providers",children:"支付提供商"}),(0,r.jsx)(u.SP,{value:"plans",children:"订阅计划"}),(0,r.jsx)(u.SP,{value:"analytics",children:"交易分析"})]}),(0,r.jsx)(u.nU,{value:"providers",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold",children:"Payment Providers"}),(0,r.jsxs)(i.z,{onClick:()=>{B(null),es({name:"",type:"stripe",enabled:!0,priority:1,config:{environment:"sandbox",supportedCurrencies:["USD"],supportedCountries:["US"]},features:{subscription:!0,oneTime:!0,refund:!0,webhook:!0}}),H(!0)},children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Add Provider"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:z.map(e=>(0,r.jsxs)(a.Zb,{className:"relative",children:[(0,r.jsx)(a.Ol,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(a.ll,{className:"flex items-center gap-2",children:[e.name,eo(e)]}),(0,r.jsxs)(a.SZ,{className:"flex items-center gap-2",children:[(0,r.jsx)(d.C,{variant:"stripe"===e.type?"default":"secondary",children:e.type.toUpperCase()}),(0,r.jsx)(d.C,{variant:e.enabled?"default":"secondary",children:e.enabled?"Enabled":"Disabled"})]})]}),(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>el(e.id),children:(0,r.jsx)(m,{className:"h-3 w-3"})}),(0,r.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>{B(e),es(e),H(!0)},children:(0,r.jsx)(g.Z,{className:"h-3 w-3"})}),(0,r.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>ec(e.id,e.name),className:"text-red-500 hover:text-red-700",children:(0,r.jsx)(y.Z,{className:"h-3 w-3"})})]})]})}),(0,r.jsx)(a.aY,{children:(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Environment:"})," ",e.config.environment]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Currencies:"})," ",e.config.supportedCurrencies.join(", ")]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Features:"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.features.subscription&&(0,r.jsx)(d.C,{variant:"outline",className:"text-xs",children:"Subscription"}),e.features.oneTime&&(0,r.jsx)(d.C,{variant:"outline",className:"text-xs",children:"One-time"}),e.features.refund&&(0,r.jsx)(d.C,{variant:"outline",className:"text-xs",children:"Refund"}),e.features.webhook&&(0,r.jsx)(d.C,{variant:"outline",className:"text-xs",children:"Webhook"})]})]})]})})]},e.id))})]})}),(0,r.jsx)(u.nU,{value:"plans",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold",children:"Subscription Plans"}),(0,r.jsxs)(i.z,{onClick:()=>{W(null),er({name:"",description:"",type:"premium",price:0,currency:"USD",interval:"month",enabled:!0,popular:!1,features:{imageGenerations:100,highResolution:!0,advancedStyles:!0,priorityQueue:!1,apiAccess:!1,commercialUse:!1}}),L(!0)},children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Add Plan"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:F.map(e=>(0,r.jsxs)(a.Zb,{className:"relative",children:[(0,r.jsx)(a.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(a.ll,{className:"flex items-center gap-2",children:[e.name,e.popular&&(0,r.jsx)(d.C,{className:"bg-gradient-to-r from-purple-500 to-pink-500",children:"Popular"})]}),(0,r.jsxs)(a.SZ,{children:[(0,r.jsx)(d.C,{variant:"premium"===e.type?"default":"secondary",children:e.type.toUpperCase()}),(0,r.jsxs)("span",{className:"ml-2 font-medium",children:["$",e.price,"/",e.interval]})]})]}),(0,r.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>{W(e),er(e),L(!0)},children:(0,r.jsx)(g.Z,{className:"h-3 w-3"})})]})}),(0,r.jsx)(a.aY,{children:(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsx)("div",{children:e.description}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Image Generations:"})," ",e.features.imageGenerations,"/month"]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.features.highResolution&&(0,r.jsx)(d.C,{variant:"outline",className:"text-xs",children:"High Resolution"}),e.features.advancedStyles&&(0,r.jsx)(d.C,{variant:"outline",className:"text-xs",children:"Advanced Styles"}),e.features.priorityQueue&&(0,r.jsx)(d.C,{variant:"outline",className:"text-xs",children:"Priority Queue"}),e.features.apiAccess&&(0,r.jsx)(d.C,{variant:"outline",className:"text-xs",children:"API Access"}),e.features.commercialUse&&(0,r.jsx)(d.C,{variant:"outline",className:"text-xs",children:"Commercial Use"})]})]})]})})]},e.id))})]})}),(0,r.jsx)(u.nU,{value:"analytics",children:(0,r.jsxs)(a.Zb,{children:[(0,r.jsxs)(a.Ol,{children:[(0,r.jsx)(a.ll,{children:"Payment Analytics"}),(0,r.jsx)(a.SZ,{children:"交易统计和支付分析"})]}),(0,r.jsx)(a.aY,{children:(0,r.jsxs)("div",{className:"text-center text-gray-500 py-12",children:["交易分析功能开发中...",(0,r.jsx)("br",{}),"将包含收入统计、用户订阅分析、支付成功率等功能"]})})]})})]}),q&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)(a.Zb,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)(a.Ol,{children:(0,r.jsx)(a.ll,{children:G?"Edit Provider":"Add Provider"})}),(0,r.jsxs)(a.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"provider-name",children:"Provider Name"}),(0,r.jsx)(l.I,{id:"provider-name",value:ee.name||"",onChange:e=>es({...ee,name:e.target.value}),placeholder:"e.g., Stripe, PayPal"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"provider-type",children:"Provider Type"}),(0,r.jsxs)(p.Ph,{value:ee.type,onValueChange:e=>es({...ee,type:e}),children:[(0,r.jsx)(p.i4,{children:(0,r.jsx)(p.ki,{})}),(0,r.jsxs)(p.Bw,{children:[(0,r.jsx)(p.Ql,{value:"stripe",children:"Stripe"}),(0,r.jsx)(p.Ql,{value:"paypal",children:"PayPal"}),(0,r.jsx)(p.Ql,{value:"alipay",children:"Alipay"}),(0,r.jsx)(p.Ql,{value:"wechat",children:"WeChat Pay"}),(0,r.jsx)(p.Ql,{value:"crypto",children:"Crypto"})]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o.r,{id:"provider-enabled",checked:ee.enabled||!1,onCheckedChange:e=>es({...ee,enabled:e})}),(0,r.jsx)(c._,{htmlFor:"provider-enabled",children:"Enable Provider"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"provider-priority",children:"Priority"}),(0,r.jsx)(l.I,{id:"provider-priority",type:"number",value:ee.priority||1,onChange:e=>es({...ee,priority:parseInt(e.target.value)})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{children:"Environment"}),(0,r.jsxs)(p.Ph,{value:null===(e=ee.config)||void 0===e?void 0:e.environment,onValueChange:e=>es({...ee,config:{...ee.config,environment:e}}),children:[(0,r.jsx)(p.i4,{children:(0,r.jsx)(p.ki,{})}),(0,r.jsxs)(p.Bw,{children:[(0,r.jsx)(p.Ql,{value:"sandbox",children:"Sandbox"}),(0,r.jsx)(p.Ql,{value:"production",children:"Production"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"api-key",children:"API Key"}),(0,r.jsx)(l.I,{id:"api-key",type:"password",value:(null===(s=ee.config)||void 0===s?void 0:s.apiKey)||"",onChange:e=>es({...ee,config:{...ee.config,apiKey:e.target.value}}),placeholder:"Enter API key"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"secret-key",children:"Secret Key"}),(0,r.jsx)(l.I,{id:"secret-key",type:"password",value:(null===(t=ee.config)||void 0===t?void 0:t.secretKey)||"",onChange:e=>es({...ee,config:{...ee.config,secretKey:e.target.value}}),placeholder:"Enter secret key"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"webhook-secret",children:"Webhook Secret"}),(0,r.jsx)(l.I,{id:"webhook-secret",type:"password",value:(null===(N=ee.config)||void 0===N?void 0:N.webhookSecret)||"",onChange:e=>es({...ee,config:{...ee.config,webhookSecret:e.target.value}}),placeholder:"Enter webhook secret"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"supported-currencies",children:"Supported Currencies (comma separated)"}),(0,r.jsx)(l.I,{id:"supported-currencies",value:(null===(k=ee.config)||void 0===k?void 0:null===(w=k.supportedCurrencies)||void 0===w?void 0:w.join(", "))||"USD",onChange:e=>es({...ee,config:{...ee.config,supportedCurrencies:e.target.value.split(",").map(e=>e.trim())}}),placeholder:"USD, EUR, GBP"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"supported-countries",children:"Supported Countries (comma separated)"}),(0,r.jsx)(l.I,{id:"supported-countries",value:(null===(S=ee.config)||void 0===S?void 0:null===(C=S.supportedCountries)||void 0===C?void 0:C.join(", "))||"US",onChange:e=>es({...ee,config:{...ee.config,supportedCountries:e.target.value.split(",").map(e=>e.trim())}}),placeholder:"US, CA, GB, AU"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{children:"Features"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o.r,{checked:(null===(P=ee.features)||void 0===P?void 0:P.subscription)||!1,onCheckedChange:e=>es({...ee,features:{...ee.features,subscription:e}})}),(0,r.jsx)(c._,{children:"Subscription"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o.r,{checked:(null===(_=ee.features)||void 0===_?void 0:_.oneTime)||!1,onCheckedChange:e=>es({...ee,features:{...ee.features,oneTime:e}})}),(0,r.jsx)(c._,{children:"One-time Payment"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o.r,{checked:(null===(T=ee.features)||void 0===T?void 0:T.refund)||!1,onCheckedChange:e=>es({...ee,features:{...ee.features,refund:e}})}),(0,r.jsx)(c._,{children:"Refund"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o.r,{checked:(null===(R=ee.features)||void 0===R?void 0:R.webhook)||!1,onCheckedChange:e=>es({...ee,features:{...ee.features,webhook:e}})}),(0,r.jsx)(c._,{children:"Webhook"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(i.z,{variant:"outline",onClick:()=>H(!1),type:"button",children:"Cancel"}),(0,r.jsx)(i.z,{onClick:ea,type:"button",disabled:!ee.name||!ee.type,children:"Save"})]})]})]})}),K&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)(a.Zb,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)(a.Ol,{children:(0,r.jsx)(a.ll,{children:Y?"Edit Plan":"Add Plan"})}),(0,r.jsxs)(a.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"plan-name",children:"Plan Name"}),(0,r.jsx)(l.I,{id:"plan-name",value:et.name||"",onChange:e=>er({...et,name:e.target.value}),placeholder:"e.g., Pro Plan"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"plan-type",children:"Plan Type"}),(0,r.jsxs)(p.Ph,{value:et.type,onValueChange:e=>er({...et,type:e}),children:[(0,r.jsx)(p.i4,{children:(0,r.jsx)(p.ki,{})}),(0,r.jsxs)(p.Bw,{children:[(0,r.jsx)(p.Ql,{value:"free",children:"Free"}),(0,r.jsx)(p.Ql,{value:"premium",children:"Premium"}),(0,r.jsx)(p.Ql,{value:"enterprise",children:"Enterprise"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"plan-description",children:"Description"}),(0,r.jsx)(f.g,{id:"plan-description",value:et.description||"",onChange:e=>er({...et,description:e.target.value}),placeholder:"Describe the plan benefits"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"plan-price",children:"Price"}),(0,r.jsx)(l.I,{id:"plan-price",type:"number",step:"0.01",value:et.price||0,onChange:e=>er({...et,price:parseFloat(e.target.value)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"plan-currency",children:"Currency"}),(0,r.jsxs)(p.Ph,{value:et.currency,onValueChange:e=>er({...et,currency:e}),children:[(0,r.jsx)(p.i4,{children:(0,r.jsx)(p.ki,{})}),(0,r.jsxs)(p.Bw,{children:[(0,r.jsx)(p.Ql,{value:"USD",children:"USD"}),(0,r.jsx)(p.Ql,{value:"EUR",children:"EUR"}),(0,r.jsx)(p.Ql,{value:"GBP",children:"GBP"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"plan-interval",children:"Interval"}),(0,r.jsxs)(p.Ph,{value:et.interval,onValueChange:e=>er({...et,interval:e}),children:[(0,r.jsx)(p.i4,{children:(0,r.jsx)(p.ki,{})}),(0,r.jsxs)(p.Bw,{children:[(0,r.jsx)(p.Ql,{value:"month",children:"Monthly"}),(0,r.jsx)(p.Ql,{value:"year",children:"Yearly"}),(0,r.jsx)(p.Ql,{value:"lifetime",children:"Lifetime"})]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o.r,{id:"plan-enabled",checked:et.enabled||!1,onCheckedChange:e=>er({...et,enabled:e})}),(0,r.jsx)(c._,{htmlFor:"plan-enabled",children:"Enable Plan"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o.r,{id:"plan-popular",checked:et.popular||!1,onCheckedChange:e=>er({...et,popular:e})}),(0,r.jsx)(c._,{htmlFor:"plan-popular",children:"Mark as Popular"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{children:"Plan Features"}),(0,r.jsxs)("div",{className:"space-y-3 mt-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"image-generations",children:"Image Generations per Month"}),(0,r.jsx)(l.I,{id:"image-generations",type:"number",value:(null===(E=et.features)||void 0===E?void 0:E.imageGenerations)||0,onChange:e=>er({...et,features:{...et.features,imageGenerations:parseInt(e.target.value)}})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o.r,{checked:(null===(A=et.features)||void 0===A?void 0:A.highResolution)||!1,onCheckedChange:e=>er({...et,features:{...et.features,highResolution:e}})}),(0,r.jsx)(c._,{children:"High Resolution"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o.r,{checked:(null===(U=et.features)||void 0===U?void 0:U.advancedStyles)||!1,onCheckedChange:e=>er({...et,features:{...et.features,advancedStyles:e}})}),(0,r.jsx)(c._,{children:"Advanced Styles"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o.r,{checked:(null===(Z=et.features)||void 0===Z?void 0:Z.priorityQueue)||!1,onCheckedChange:e=>er({...et,features:{...et.features,priorityQueue:e}})}),(0,r.jsx)(c._,{children:"Priority Queue"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o.r,{checked:(null===(I=et.features)||void 0===I?void 0:I.apiAccess)||!1,onCheckedChange:e=>er({...et,features:{...et.features,apiAccess:e}})}),(0,r.jsx)(c._,{children:"API Access"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o.r,{checked:(null===(O=et.features)||void 0===O?void 0:O.commercialUse)||!1,onCheckedChange:e=>er({...et,features:{...et.features,commercialUse:e}})}),(0,r.jsx)(c._,{children:"Commercial Use"})]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(i.z,{variant:"outline",onClick:()=>L(!1),type:"button",children:"Cancel"}),(0,r.jsx)(i.z,{onClick:ei,type:"button",disabled:!et.name||!et.type,children:"Save"})]})]})]})})]})}},46859:function(e,s,t){"use strict";t.d(s,{C:function(){return l}});var r=t(18376);t(57894);var n=t(30330),a=t(58755);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:t,...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)(i({variant:t}),s),...n})}},65354:function(e,s,t){"use strict";t.d(s,{z:function(){return o}});var r=t(18376),n=t(57894),a=t(7116),i=t(30330),l=t(58755);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef((e,s)=>{let{className:t,variant:n,size:i,asChild:o=!1,...d}=e,u=o?a.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(c({variant:n,size:i,className:t})),ref:s,...d})});o.displayName="Button"},95801:function(e,s,t){"use strict";t.d(s,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var r=t(18376),n=t(57894),a=t(58755);let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});i.displayName="Card";let l=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...n})});l.displayName="CardHeader";let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});c.displayName="CardTitle";let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",t),...n})});o.displayName="CardDescription";let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",t),...n})});d.displayName="CardContent",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},31554:function(e,s,t){"use strict";t.d(s,{I:function(){return i}});var r=t(18376),n=t(57894),a=t(58755);let i=n.forwardRef((e,s)=>{let{className:t,type:n,...i}=e;return(0,r.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});i.displayName="Input"},41775:function(e,s,t){"use strict";t.d(s,{_:function(){return o}});var r=t(18376),n=t(57894),a=t(77639),i=t(30330),l=t(58755);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(a.f,{ref:s,className:(0,l.cn)(c(),t),...n})});o.displayName=a.f.displayName},82878:function(e,s,t){"use strict";t.d(s,{Bw:function(){return m},Ph:function(){return d},Ql:function(){return x},i4:function(){return p},ki:function(){return u}});var r=t(18376),n=t(57894),a=t(74386),i=t(96889),l=t(78172),c=t(6772),o=t(58755);let d=a.fC;a.ZA;let u=a.B4,p=n.forwardRef((e,s)=>{let{className:t,children:n,...l}=e;return(0,r.jsxs)(a.xz,{ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[n,(0,r.jsx)(a.JO,{asChild:!0,children:(0,r.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});p.displayName=a.xz.displayName;let f=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(a.u_,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});f.displayName=a.u_.displayName;let h=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(a.$G,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=a.$G.displayName;let m=n.forwardRef((e,s)=>{let{className:t,children:n,position:i="popper",...l}=e;return(0,r.jsx)(a.h_,{children:(0,r.jsxs)(a.VY,{ref:s,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...l,children:[(0,r.jsx)(f,{}),(0,r.jsx)(a.l_,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,r.jsx)(h,{})]})})});m.displayName=a.VY.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(a.__,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...n})}).displayName=a.__.displayName;let x=n.forwardRef((e,s)=>{let{className:t,children:n,...i}=e;return(0,r.jsxs)(a.ck,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(a.wU,{children:(0,r.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(a.eT,{children:n})]})});x.displayName=a.ck.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(a.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",t),...n})}).displayName=a.Z0.displayName},44911:function(e,s,t){"use strict";t.d(s,{r:function(){return l}});var r=t(18376),n=t(57894),a=t(17162),i=t(58755);let l=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(a.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...n,ref:s,children:(0,r.jsx)(a.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=a.fC.displayName},92392:function(e,s,t){"use strict";t.d(s,{SP:function(){return o},dr:function(){return c},mQ:function(){return l},nU:function(){return d}});var r=t(18376),n=t(57894),a=t(28048),i=t(58755);let l=a.fC,c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(a.aV,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...n})});c.displayName=a.aV.displayName;let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(a.xz,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...n})});o.displayName=a.xz.displayName;let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(a.VY,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n})});d.displayName=a.VY.displayName},53922:function(e,s,t){"use strict";t.d(s,{g:function(){return i}});var r=t(18376),n=t(57894),a=t(58755);let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});i.displayName="Textarea"},73280:function(e,s,t){"use strict";t.d(s,{pm:function(){return p}});var r=t(57894);let n=0,a=new Map,i=e=>{if(a.has(e))return;let s=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,s)},l=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},c=[],o={toasts:[]};function d(e){o=l(o,e),c.forEach(e=>{e(o)})}function u(e){let{...s}=e,t=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function p(){let[e,s]=r.useState(o);return r.useEffect(()=>(c.push(s),()=>{let e=c.indexOf(s);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},58755:function(e,s,t){"use strict";t.d(s,{cn:function(){return a}});var r=t(4941),n=t(48244);function a(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.m6)((0,r.W)(s))}},93560:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(37020).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},37929:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(37020).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},16270:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(37020).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},95520:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(37020).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},99806:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(37020).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},77639:function(e,s,t){"use strict";t.d(s,{f:function(){return l}});var r=t(57894),n=t(35064),a=t(18376),i=r.forwardRef((e,s)=>(0,a.jsx)(n.WV.label,{...e,ref:s,onMouseDown:s=>{var t;s.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var l=i},17162:function(e,s,t){"use strict";t.d(s,{bU:function(){return w},fC:function(){return N}});var r=t(57894),n=t(19394),a=t(93332),i=t(76732),l=t(94977),c=t(91665),o=t(37610),d=t(35064),u=t(18376),p="Switch",[f,h]=(0,i.b)(p),[m,x]=f(p),v=r.forwardRef((e,s)=>{let{__scopeSwitch:t,name:i,checked:c,defaultChecked:o,required:p,disabled:f,value:h="on",onCheckedChange:x,form:v,...j}=e,[g,N]=r.useState(null),w=(0,a.e)(s,e=>N(e)),k=r.useRef(!1),C=!g||v||!!g.closest("form"),[S=!1,P]=(0,l.T)({prop:c,defaultProp:o,onChange:x});return(0,u.jsxs)(m,{scope:t,checked:S,disabled:f,children:[(0,u.jsx)(d.WV.button,{type:"button",role:"switch","aria-checked":S,"aria-required":p,"data-state":b(S),"data-disabled":f?"":void 0,disabled:f,value:h,...j,ref:w,onClick:(0,n.M)(e.onClick,e=>{P(e=>!e),C&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),C&&(0,u.jsx)(y,{control:g,bubbles:!k.current,name:i,value:h,checked:S,required:p,disabled:f,form:v,style:{transform:"translateX(-100%)"}})]})});v.displayName=p;var j="SwitchThumb",g=r.forwardRef((e,s)=>{let{__scopeSwitch:t,...r}=e,n=x(j,t);return(0,u.jsx)(d.WV.span,{"data-state":b(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:s})});g.displayName=j;var y=e=>{let{control:s,checked:t,bubbles:n=!0,...a}=e,i=r.useRef(null),l=(0,c.D)(t),d=(0,o.t)(s);return r.useEffect(()=>{let e=i.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==t&&s){let r=new Event("click",{bubbles:n});s.call(e,t),e.dispatchEvent(r)}},[l,t,n]),(0,u.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...a,tabIndex:-1,ref:i,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(e){return e?"checked":"unchecked"}var N=v,w=g}},function(e){e.O(0,[7198,2593,8048,8176,8922,5996,1744],function(){return e(e.s=51339)}),_N_E=e.O()}]);