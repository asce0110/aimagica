(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{19600:function(e,t,r){Promise.resolve().then(r.t.bind(r,47960,23)),Promise.resolve().then(r.bind(r,79819)),Promise.resolve().then(r.bind(r,32126)),Promise.resolve().then(r.bind(r,80465))},79819:function(e,t,r){"use strict";r.d(t,{default:function(){return g}});var n=r(57437),s=r(2265),o=r(79205);let a=(0,o.Z)("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]),i=(0,o.Z)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var l=r(42208);let c=(0,o.Z)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);var u=r(91723),d=r(10407),m=r(92451),h=r(55177),f=r(99376);function g(){let e=(0,f.useRouter)(),[t,r]=(0,s.useState)(!1),[o,g]=(0,s.useState)(0),[y,v]=(0,s.useState)({isRendering:!1,renderProgress:0,generatedImages:[],textPrompt:"",selectedAspectRatio:"1:1",selectedStyleId:null,currentStep:"create",startTime:null}),[p,x]=(0,s.useState)(!1);(0,s.useEffect)(()=>{x(!0),v((0,h.hZ)())},[]),(0,s.useEffect)(()=>{if(p)return(0,h.To)(e=>{v(e)})},[p]);let w=[{icon:a,title:"☕ 放松一下",content:"现在是喝杯咖啡的好时候！AI正在为您精心创作中...",color:"#8b7355"},{icon:i,title:"\uD83D\uDCBB 做点别的",content:"您可以切换到其他标签页，AI完成后会有音效提示哦！",color:"#d4a574"},{icon:l.Z,title:"\uD83D\uDC40 预览风格",content:"不妨点击下面的风格预览图片，探索更多精美作品！",color:"#2d3e2d"},{icon:c,title:"\uD83C\uDFB5 即将完成",content:"马上就好了！完成时会播放愉快的音效通知您～",color:"#8b7355"}];if((0,s.useEffect)(()=>{if(y.isRendering)g(y.renderProgress<25?0:y.renderProgress<50?1:y.renderProgress<80?2:3)},[y.renderProgress,y.isRendering]),!p||!y.isRendering)return null;let b=w[o],k=b.icon;return(0,n.jsxs)("div",{className:"\n        fixed top-1/2 right-0 transform -translate-y-1/2 z-40\n        transition-all duration-300 ease-in-out\n        ".concat(t?"translate-x-0":"translate-x-64","\n      "),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[(0,n.jsxs)("div",{className:"bg-white rounded-l-2xl shadow-2xl border-2 border-[#2d3e2d] border-r-0 w-72 cursor-pointer hover:bg-[#f5f1e8] transition-all",onClick:()=>{e.push("/")},children:[(0,n.jsxs)("div",{className:"p-3 relative rounded-tl-2xl",style:{backgroundColor:b.color},children:[(0,n.jsx)("div",{className:"absolute -top-1 -left-1 w-4 h-4 bg-[#d4a574] rounded-full animate-pulse"}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"text-base font-black text-[#f5f1e8] transform rotate-1",style:{fontFamily:"Comic Sans MS, cursive",textShadow:"1px 1px 0px rgba(0,0,0,0.3)"},children:"✨ AI生图进行中"}),(0,n.jsx)("div",{className:"text-white/80 text-sm font-bold",children:"点击回到生图"})]})]}),(0,n.jsx)("div",{className:"p-4",children:(0,n.jsxs)("div",{className:"bg-gradient-to-r from-[#f5f1e8] to-[#d4a574]/20 rounded-xl p-3 border border-[#8b7355]/20",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)(u.Z,{className:"w-4 h-4 text-[#8b7355]"}),(0,n.jsxs)("span",{className:"text-sm font-bold text-[#2d3e2d]",style:{fontFamily:"Comic Sans MS, cursive"},children:["生成进度：",Math.round(y.renderProgress),"%"]})]}),(0,n.jsx)("div",{className:"w-full bg-white rounded-full h-3 shadow-inner",children:(0,n.jsx)("div",{className:"h-3 rounded-full transition-all duration-300 shadow-sm",style:{width:"".concat(y.renderProgress,"%"),background:"linear-gradient(90deg, ".concat(b.color,", #d4a574)")}})}),(0,n.jsx)("div",{className:"mt-2 text-center",children:(0,n.jsx)("p",{className:"text-xs text-[#8b7355] font-medium",style:{fontFamily:"Comic Sans MS, cursive"},children:y.renderProgress<30?"\uD83C\uDFAF AI正在理解您的创意...":y.renderProgress<60?"\uD83C\uDFA8 正在绘制精美作品...":y.renderProgress<90?"✨ 添加最后的魔法细节...":"\uD83C\uDF89 马上就完成了！"})})]})})]}),(0,n.jsx)("div",{className:"\n          absolute top-1/2 -left-12 transform -translate-y-1/2\n          bg-white rounded-l-xl shadow-lg border-2 border-[#2d3e2d] border-r-0\n          p-3 cursor-pointer transition-all duration-300\n          ".concat(t?"bg-[#d4a574]":"bg-white hover:bg-[#f5f1e8]","\n        "),style:{backgroundColor:t?b.color:""},children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,n.jsx)("div",{className:"p-2 rounded-full transition-all duration-300 ".concat(t?"text-white":"text-[#2d3e2d]"),children:(0,n.jsx)(k,{className:"w-5 h-5"})}),(0,n.jsx)("div",{className:"transition-all duration-300 ".concat(t?"text-white":"text-[#8b7355]"),children:t?(0,n.jsx)(d.Z,{className:"w-4 h-4"}):(0,n.jsx)(m.Z,{className:"w-4 h-4 animate-pulse"})}),(0,n.jsxs)("div",{className:"relative w-8 h-8",children:[(0,n.jsxs)("svg",{className:"w-8 h-8 transform -rotate-90",viewBox:"0 0 32 32",children:[(0,n.jsx)("circle",{cx:"16",cy:"16",r:"12",stroke:"currentColor",strokeWidth:"2",fill:"none",className:t?"text-white/30":"text-gray-300"}),(0,n.jsx)("circle",{cx:"16",cy:"16",r:"12",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeDasharray:"".concat(.75*y.renderProgress," 100"),className:t?"text-white":"text-[#d4a574]",style:{transition:"stroke-dasharray 0.3s ease"}})]}),(0,n.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold ".concat(t?"text-white":"text-[#2d3e2d]"),children:[Math.round(y.renderProgress),"%"]})]})]})}),(0,n.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:Array.from({length:3}).map((e,t)=>(0,n.jsx)("div",{className:"\n              absolute w-1 h-1 bg-[#d4a574]/30 rounded-full\n              transition-all duration-2000 animate-ping\n            ",style:{left:"".concat(20+30*t,"%"),top:"".concat(20+t%2*60,"%"),animationDelay:"".concat(700*t,"ms")}},t))})]})}},32126:function(e,t,r){"use strict";r.d(t,{default:function(){return d},d:function(){return u},V:function(){return c}});var n=r(57437),s=r(2265),o=r(25922);function a(e){let{children:t,...r}=e;return(0,n.jsx)(o.f,{...r,children:t})}let i=(0,s.createContext)({data:null,status:"unauthenticated",update:async()=>null});function l(e){let{children:t}=e;return(0,n.jsx)(i.Provider,{value:{data:null,status:"unauthenticated",update:async()=>null},children:t})}function c(){let[e]=s.useState({data:null,status:"unauthenticated",update:async()=>null});try{let e=(0,s.useContext)(i);if(e)return e}catch(e){console.debug("MockSessionContext not available:",e)}return e}async function u(e){window.location.href=(null==e?void 0:e.callbackUrl)||"/"}function d(e){let{children:t}=e;return(0,n.jsx)(l,{children:(0,n.jsx)(a,{attribute:"class",defaultTheme:"dark",enableSystem:!1,disableTransitionOnChange:!0,storageKey:void 0,children:t})})}},80465:function(e,t,r){"use strict";r.d(t,{default:function(){return a}});var n=r(57437),s=r(2265),o=r(40257);function a(){let[e,t]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{},[]),!e||o.env.VERCEL)?null:(0,n.jsx)("div",{className:"fixed bottom-4 right-4 z-50 bg-black/80 text-white px-3 py-1 rounded text-sm",children:"\uD83D\uDD27 Dev Mode"})}},55177:function(e,t,r){"use strict";r.d(t,{E4:function(){return m},RO:function(){return u},To:function(){return l},dF:function(){return d},hZ:function(){return a},wQ:function(){return c}});let n="aimagica_generation_state",s={isRendering:!1,renderProgress:0,generatedImages:[],textPrompt:"",selectedAspectRatio:"1:1",selectedStyleId:null,selectedStyleName:null,currentStep:"create",startTime:null},o=e=>{try{let t={...a(),...e};localStorage.setItem(n,JSON.stringify(t)),window.dispatchEvent(new CustomEvent("generationStateChange",{detail:t}))}catch(e){console.warn("Failed to save generation state:",e)}},a=()=>{try{let e=localStorage.getItem(n);if(e){let t=JSON.parse(e);if(t.startTime&&Date.now()-t.startTime>6e5)return i(),s;return{...s,...t}}}catch(e){console.warn("Failed to load generation state:",e)}return s},i=()=>{try{localStorage.removeItem(n),window.dispatchEvent(new CustomEvent("generationStateChange",{detail:s}))}catch(e){console.warn("Failed to clear generation state:",e)}},l=e=>{let t=t=>{e(t.detail)};return window.addEventListener("generationStateChange",t),()=>{window.removeEventListener("generationStateChange",t)}},c=(e,t,r,n)=>{o({isRendering:!0,renderProgress:0,textPrompt:e,selectedAspectRatio:t,selectedStyleId:r,selectedStyleName:n||null,currentStep:"rendering",startTime:Date.now()})},u=e=>{a().isRendering&&o({renderProgress:e})},d=e=>{o({isRendering:!1,renderProgress:100,generatedImages:e,currentStep:"result"})},m=()=>{o({isRendering:!1,renderProgress:0,currentStep:"create"})}},79205:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:d,...m}=e;return(0,n.createElement)("svg",{ref:t,...a,width:s,height:s,stroke:r,strokeWidth:l?24*Number(i)/Number(s):i,className:o("lucide",c),...m},[...d.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),l=(e,t)=>{let r=(0,n.forwardRef)((r,a)=>{let{className:l,...c}=r;return(0,n.createElement)(i,{ref:a,iconNode:t,className:o("lucide-".concat(s(e)),l),...c})});return r.displayName="".concat(e),r}},92451:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},10407:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},91723:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},42208:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},99376:function(e,t,r){"use strict";var n=r(35475);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},40257:function(e,t,r){"use strict";var n,s;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(s=r.g.process)?void 0:s.env)?r.g.process:r(44227)},44227:function(e){!function(){var t={229:function(e){var t,r,n,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l=[],c=!1,u=-1;function d(){c&&n&&(c=!1,n.length?l=n.concat(l):u=-1,l.length&&m())}function m(){if(!c){var e=i(d);c=!0;for(var t=l.length;t;){for(n=l,l=[];++u<t;)n&&n[u].run();u=-1,t=l.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new h(e,t)),1!==l.length||c||i(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var o=r[e]={exports:{}},a=!0;try{t[e](o,o.exports,n),a=!1}finally{a&&delete r[e]}return o.exports}n.ab="//";var s=n(229);e.exports=s}()},47960:function(){},25922:function(e,t,r){"use strict";r.d(t,{f:function(){return c}});var n=r(2265),s=(e,t,r,n,s,o,a,i)=>{let l=document.documentElement,c=["light","dark"];function u(t){(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&o?s.map(e=>o[e]||e):s;r?(l.classList.remove(...n),l.classList.add(o&&o[t]?o[t]:t)):l.setAttribute(e,t)}),i&&c.includes(t)&&(l.style.colorScheme=t)}if(n)u(n);else try{let e=localStorage.getItem(t)||r,n=a&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;u(n)}catch(e){}},o=["light","dark"],a="(prefers-color-scheme: dark)",i="undefined"==typeof window,l=n.createContext(void 0),c=e=>n.useContext(l)?n.createElement(n.Fragment,null,e.children):n.createElement(d,{...e}),u=["light","dark"],d=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:s=!0,enableColorScheme:i=!0,storageKey:c="theme",themes:d=u,defaultTheme:y=s?"system":"light",attribute:v="data-theme",value:p,children:x,nonce:w,scriptProps:b}=e,[k,S]=n.useState(()=>h(c,y)),[C,N]=n.useState(()=>"system"===k?g():k),j=p?Object.values(p):d,E=n.useCallback(e=>{let t=e;if(!t)return;"system"===e&&s&&(t=g());let n=p?p[t]:t,a=r?f(w):null,l=document.documentElement,c=e=>{"class"===e?(l.classList.remove(...j),n&&l.classList.add(n)):e.startsWith("data-")&&(n?l.setAttribute(e,n):l.removeAttribute(e))};if(Array.isArray(v)?v.forEach(c):c(v),i){let e=o.includes(y)?y:null,r=o.includes(t)?t:e;l.style.colorScheme=r}null==a||a()},[w]),T=n.useCallback(e=>{let t="function"==typeof e?e(k):e;S(t);try{localStorage.setItem(c,t)}catch(e){}},[k]),P=n.useCallback(e=>{N(g(e)),"system"===k&&s&&!t&&E("system")},[k,t]);n.useEffect(()=>{let e=window.matchMedia(a);return e.addListener(P),P(e),()=>e.removeListener(P)},[P]),n.useEffect(()=>{let e=e=>{e.key===c&&(e.newValue?S(e.newValue):T(y))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[T]),n.useEffect(()=>{E(null!=t?t:k)},[t,k]);let A=n.useMemo(()=>({theme:k,setTheme:T,forcedTheme:t,resolvedTheme:"system"===k?C:k,themes:s?[...d,"system"]:d,systemTheme:s?C:void 0}),[k,T,t,C,s,d]);return n.createElement(l.Provider,{value:A},n.createElement(m,{forcedTheme:t,storageKey:c,attribute:v,enableSystem:s,enableColorScheme:i,defaultTheme:y,value:p,themes:d,nonce:w,scriptProps:b}),x)},m=n.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:o,enableSystem:a,enableColorScheme:i,defaultTheme:l,value:c,themes:u,nonce:d,scriptProps:m}=e,h=JSON.stringify([o,r,l,t,u,c,a,i]).slice(1,-1);return n.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?d:"",dangerouslySetInnerHTML:{__html:"(".concat(s.toString(),")(").concat(h,")")}})}),h=(e,t)=>{let r;if(!i){try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t}},f=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},g=e=>(e||(e=window.matchMedia(a)),e.matches?"dark":"light")}},function(e){e.O(0,[3587,2971,2117,1744],function(){return e(e.s=19600)}),_N_E=e.O()}]);