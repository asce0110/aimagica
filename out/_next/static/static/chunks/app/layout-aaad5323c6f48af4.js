(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{78569:function(e,t,r){Promise.resolve().then(r.t.bind(r,99157,23)),Promise.resolve().then(r.bind(r,61410)),Promise.resolve().then(r.bind(r,24698)),Promise.resolve().then(r.bind(r,87545))},61410:function(e,t,r){"use strict";r.d(t,{default:function(){return g}});var n=r(18376),a=r(57894),s=r(37020);let o=(0,s.Z)("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]),i=(0,s.Z)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var l=r(96433);let c=(0,s.Z)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);var d=r(98468),u=r(27206),h=r(25418),f=r(88376),m=r(65538);function g(){let e=(0,m.useRouter)(),[t,r]=(0,a.useState)(!1),[s,g]=(0,a.useState)(0),[x,w]=(0,a.useState)({isRendering:!1,renderProgress:0,generatedImages:[],textPrompt:"",selectedAspectRatio:"1:1",selectedStyleId:null,currentStep:"create",startTime:null}),[y,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{p(!0),w((0,f.hZ)())},[]),(0,a.useEffect)(()=>{if(y)return(0,f.To)(e=>{w(e)})},[y]);let v=[{icon:o,title:"☕ 放松一下",content:"现在是喝杯咖啡的好时候！AI正在为您精心创作中...",color:"#8b7355"},{icon:i,title:"\uD83D\uDCBB 做点别的",content:"您可以切换到其他标签页，AI完成后会有音效提示哦！",color:"#d4a574"},{icon:l.Z,title:"\uD83D\uDC40 预览风格",content:"不妨点击下面的风格预览图片，探索更多精美作品！",color:"#2d3e2d"},{icon:c,title:"\uD83C\uDFB5 即将完成",content:"马上就好了！完成时会播放愉快的音效通知您～",color:"#8b7355"}];if((0,a.useEffect)(()=>{if(x.isRendering)g(x.renderProgress<25?0:x.renderProgress<50?1:x.renderProgress<80?2:3)},[x.renderProgress,x.isRendering]),!y||!x.isRendering)return null;let b=v[s],k=b.icon;return(0,n.jsxs)("div",{className:"\n        fixed top-1/2 right-0 transform -translate-y-1/2 z-40\n        transition-all duration-300 ease-in-out\n        ".concat(t?"translate-x-0":"translate-x-64","\n      "),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[(0,n.jsxs)("div",{className:"bg-white rounded-l-2xl shadow-2xl border-2 border-[#2d3e2d] border-r-0 w-72 cursor-pointer hover:bg-[#f5f1e8] transition-all",onClick:()=>{e.push("/")},children:[(0,n.jsxs)("div",{className:"p-3 relative rounded-tl-2xl",style:{backgroundColor:b.color},children:[(0,n.jsx)("div",{className:"absolute -top-1 -left-1 w-4 h-4 bg-[#d4a574] rounded-full animate-pulse"}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"text-base font-black text-[#f5f1e8] transform rotate-1",style:{fontFamily:"Fredoka One, Arial Black, sans-serif",textShadow:"1px 1px 0px rgba(0,0,0,0.3)"},children:"✨ AI生图进行中"}),(0,n.jsx)("div",{className:"text-white/80 text-sm font-bold",children:"点击回到生图"})]})]}),(0,n.jsx)("div",{className:"p-4",children:(0,n.jsxs)("div",{className:"bg-gradient-to-r from-[#f5f1e8] to-[#d4a574]/20 rounded-xl p-3 border border-[#8b7355]/20",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)(d.Z,{className:"w-4 h-4 text-[#8b7355]"}),(0,n.jsxs)("span",{className:"text-sm font-bold text-[#2d3e2d]",style:{fontFamily:"Fredoka One, Arial Black, sans-serif"},children:["生成进度：",Math.round(x.renderProgress),"%"]})]}),(0,n.jsx)("div",{className:"w-full bg-white rounded-full h-3 shadow-inner",children:(0,n.jsx)("div",{className:"h-3 rounded-full transition-all duration-300 shadow-sm",style:{width:"".concat(x.renderProgress,"%"),background:"linear-gradient(90deg, ".concat(b.color,", #d4a574)")}})}),(0,n.jsx)("div",{className:"mt-2 text-center",children:(0,n.jsx)("p",{className:"text-xs text-[#8b7355] font-medium",style:{fontFamily:"Fredoka One, Arial Black, sans-serif"},children:x.renderProgress<30?"\uD83C\uDFAF AI正在理解您的创意...":x.renderProgress<60?"\uD83C\uDFA8 正在绘制精美作品...":x.renderProgress<90?"✨ 添加最后的魔法细节...":"\uD83C\uDF89 马上就完成了！"})})]})})]}),(0,n.jsx)("div",{className:"\n          absolute top-1/2 -left-12 transform -translate-y-1/2\n          bg-white rounded-l-xl shadow-lg border-2 border-[#2d3e2d] border-r-0\n          p-3 cursor-pointer transition-all duration-300\n          ".concat(t?"bg-[#d4a574]":"bg-white hover:bg-[#f5f1e8]","\n        "),style:{backgroundColor:t?b.color:""},children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,n.jsx)("div",{className:"p-2 rounded-full transition-all duration-300 ".concat(t?"text-white":"text-[#2d3e2d]"),children:(0,n.jsx)(k,{className:"w-5 h-5"})}),(0,n.jsx)("div",{className:"transition-all duration-300 ".concat(t?"text-white":"text-[#8b7355]"),children:t?(0,n.jsx)(u.Z,{className:"w-4 h-4"}):(0,n.jsx)(h.Z,{className:"w-4 h-4 animate-pulse"})}),(0,n.jsxs)("div",{className:"relative w-8 h-8",children:[(0,n.jsxs)("svg",{className:"w-8 h-8 transform -rotate-90",viewBox:"0 0 32 32",children:[(0,n.jsx)("circle",{cx:"16",cy:"16",r:"12",stroke:"currentColor",strokeWidth:"2",fill:"none",className:t?"text-white/30":"text-gray-300"}),(0,n.jsx)("circle",{cx:"16",cy:"16",r:"12",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeDasharray:"".concat(.75*x.renderProgress," 100"),className:t?"text-white":"text-[#d4a574]",style:{transition:"stroke-dasharray 0.3s ease"}})]}),(0,n.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold ".concat(t?"text-white":"text-[#2d3e2d]"),children:[Math.round(x.renderProgress),"%"]})]})]})}),(0,n.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:Array.from({length:3}).map((e,t)=>(0,n.jsx)("div",{className:"\n              absolute w-1 h-1 bg-[#d4a574]/30 rounded-full\n              transition-all duration-2000 animate-ping\n            ",style:{left:"".concat(20+30*t,"%"),top:"".concat(20+t%2*60,"%"),animationDelay:"".concat(700*t,"ms")}},t))})]})}},24698:function(e,t,r){"use strict";r.d(t,{default:function(){return h},lh:function(){return u},dr:function(){return d},VF:function(){return c}});var n=r(18376),a=r(57894),s=(r(38269),r(98130));function o(e){let{children:t,...r}=e;return(0,n.jsx)(s.f,{...r,children:t})}let i=(0,a.createContext)({data:null,status:"unauthenticated",update:async()=>null});function l(e){let{children:t}=e;return(0,n.jsx)(i.Provider,{value:{data:null,status:"unauthenticated",update:async()=>null},children:t})}function c(){{let[e,t]=a.useState({data:null,status:"loading",update:async()=>null});return a.useEffect(()=>{!function(){let e=new URLSearchParams(window.location.search),t=e.get("login"),r=e.get("error");if("success"===t){let e=window.location.pathname;window.history.replaceState({},"",e),window.location.reload()}else if(r){console.error("登录错误:",r),alert("登录失败: ".concat(r));let e=window.location.pathname;window.history.replaceState({},"",e)}}();let e=function(){try{let e=document.cookie.split(";").find(e=>e.trim().startsWith("user-info="));if(!e)return null;let t=e.split("=")[1];return JSON.parse(atob(t))}catch(e){return console.error("获取用户信息失败:",e),null}}();e?t({data:{user:e},status:"authenticated",update:async()=>null}):t({data:null,status:"unauthenticated",update:async()=>null})},[]),e}}async function d(e){window.location.href="/auth/logout"}async function u(e,t){window.location.href="/auth/google"}function h(e){let{children:t}=e;return(0,n.jsx)(l,{children:(0,n.jsx)(o,{attribute:"class",defaultTheme:"dark",enableSystem:!1,disableTransitionOnChange:!0,storageKey:void 0,children:t})})}},87545:function(e,t,r){"use strict";r.d(t,{default:function(){return o}});var n=r(18376),a=r(57894),s=r(18596);function o(){let[e,t]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{},[]),!e||s.env.VERCEL)?null:(0,n.jsx)("div",{className:"fixed bottom-4 right-4 z-50 bg-black/80 text-white px-3 py-1 rounded text-sm",children:"\uD83D\uDD27 Dev Mode"})}},88376:function(e,t,r){"use strict";r.d(t,{E4:function(){return h},RO:function(){return d},To:function(){return l},dF:function(){return u},hZ:function(){return o},wQ:function(){return c}});let n="aimagica_generation_state",a={isRendering:!1,renderProgress:0,generatedImages:[],textPrompt:"",selectedAspectRatio:"1:1",selectedStyleId:null,selectedStyleName:null,currentStep:"create",startTime:null},s=e=>{try{let t={...o(),...e};localStorage.setItem(n,JSON.stringify(t)),window.dispatchEvent(new CustomEvent("generationStateChange",{detail:t}))}catch(e){console.warn("Failed to save generation state:",e)}},o=()=>{try{let e=localStorage.getItem(n);if(e){let t=JSON.parse(e);if(t.startTime&&Date.now()-t.startTime>6e5)return i(),a;return{...a,...t}}}catch(e){console.warn("Failed to load generation state:",e)}return a},i=()=>{try{localStorage.removeItem(n),window.dispatchEvent(new CustomEvent("generationStateChange",{detail:a}))}catch(e){console.warn("Failed to clear generation state:",e)}},l=e=>{let t=t=>{e(t.detail)};return window.addEventListener("generationStateChange",t),()=>{window.removeEventListener("generationStateChange",t)}},c=(e,t,r,n)=>{s({isRendering:!0,renderProgress:0,textPrompt:e,selectedAspectRatio:t,selectedStyleId:r,selectedStyleName:n||null,currentStep:"rendering",startTime:Date.now()})},d=e=>{o().isRendering&&s({renderProgress:e})},u=e=>{s({isRendering:!1,renderProgress:100,generatedImages:e,currentStep:"result"})},h=()=>{s({isRendering:!1,renderProgress:0,currentStep:"create"})}},37020:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(57894);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...h}=e;return(0,n.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:r,strokeWidth:l?24*Number(i)/Number(a):i,className:s("lucide",c),...h},[...u.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let r=(0,n.forwardRef)((r,o)=>{let{className:l,...c}=r;return(0,n.createElement)(i,{ref:o,iconNode:t,className:s("lucide-".concat(a(e)),l),...c})});return r.displayName="".concat(e),r}},25418:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(37020).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},27206:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(37020).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},98468:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(37020).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},96433:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(37020).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},65538:function(e,t,r){"use strict";var n=r(71301);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},99157:function(){}},function(e){e.O(0,[5460,5159,8922,5996,1744],function(){return e(e.s=78569)}),_N_E=e.O()}]);